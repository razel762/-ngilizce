<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9. Sınıf İngilizce Kelime Master</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?auto=format&fit=crop&w=1000&q=80');
            background-size: cover; background-position: center; color: white; overflow: hidden;
        }

        /* Ahşap Tabela ve Zincirler */
        .sign-container { position: relative; padding-top: 40px; }
        .chains { position: absolute; top: 0; left: 20%; right: 20%; height: 50px; display: flex; justify-content: space-between; z-index: 2; }
        .chain { width: 10px; height: 60px; background: #3d3d3d; border-radius: 5px; border: 2px solid #1a1a1a; }

        .wood-sign {
            background: #5d4037;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            border: 8px solid #3e2723;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 0 #2d1b18, 0 15px 30px rgba(0,0,0,0.6);
            min-width: 280px;
        }

        #word-box {
            font-family: 'Kalam', cursive;
            font-size: 45px;
            color: #ffecb3;
            text-shadow: 3px 3px 0px #3e2723;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Rüzgar Animasyonları */
        .wind-exit { transform: translateX(250%) skewX(-30deg) rotate(10deg); opacity: 0; }
        .wind-enter { transform: translateX(-250%) skewX(30deg) rotate(-10deg); opacity: 0; }

        .game-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            width: 90%; max-width: 420px;
            border-radius: 35px; padding: 30px;
            text-align: center; border: 1px solid rgba(255,255,255,0.2);
        }

        .stat-box { background: rgba(0,0,0,0.6); padding: 12px 18px; border-radius: 20px; font-weight: bold; color: #00d2d3; border: 1px solid #00d2d3; }

        input {
            width: 100%; padding: 18px; border-radius: 18px; border: none;
            font-size: 20px; text-align: center; outline: none; margin-bottom: 20px;
            background: #f8f9fa; color: #2d3436; box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        .btn {
            background: #6c5ce7; color: white; border: none; width: 100%;
            padding: 18px; border-radius: 18px; font-size: 18px; font-weight: bold; cursor: pointer;
            transition: 0.3s; box-shadow: 0 6px 0 #4834d4;
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #4834d4; }

        /* Yanlış Çarpı */
        #wrong-overlay {
            display: none; position: fixed; inset: 0; z-index: 200;
            justify-content: center; align-items: center;
            background: rgba(255, 0, 0, 0.15); pointer-events: none;
        }
        #wrong-overlay i { font-size: 250px; color: #ff7675; animation: shake 0.4s; }

        @keyframes shake {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
        }

        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .modal { background: #1e272e; width: 85%; max-width: 380px; border-radius: 30px; padding: 30px; border: 3px solid #6c5ce7; text-align: center; }
        .score-row { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .gold { color: #feca57; font-weight: bold; }
    </style>
</head>
<body>

<div id="wrong-overlay"><i class="fa-solid fa-circle-xmark"></i></div>

<div class="game-card">
    <div class="stats" style="display:flex; justify-content:space-between; margin-bottom:25px;">
        <div class="stat-box"><i class="fa-solid fa-hourglass-half"></i> <span id="timer">60</span>s</div>
        <div class="stat-box"><i class="fa-solid fa-fire-alt"></i> <span id="score">0</span></div>
    </div>
    
    <div class="sign-container">
        <div class="chains"><div class="chain"></div><div class="chain"></div></div>
        <div class="wood-sign">
            <div id="word-box">READY?</div>
        </div>
    </div>

    <input type="text" id="ans" placeholder="İngilizcesini yazın..." autocomplete="off">
    <button id="main-btn" class="btn" onclick="check()">OYUNU BAŞLAT</button>
</div>

<div id="name-modal" class="overlay">
    <div class="modal">
        <h2 style="color:#00d2d3; margin-top:0;">OYUN BİTTİ!</h2>
        <p id="final-score" style="font-size:24px; font-weight:bold;"></p>
        <input type="text" id="player-name" placeholder="İsminizi buraya yazın...">
        <button class="btn" onclick="save()">KAYDET VE SIRALAMAYA BAK</button>
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="modal">
        <h2 style="color:#feca57; margin-top:0;"><i class="fa-solid fa-medal"></i> TOP 10 REKORLAR</h2>
        <div id="leader-list"></div>
        <button class="btn" style="margin-top:25px; background:#ff4757; box-shadow: 0 6px 0 #c0392b;" onclick="restart()">YENİDEN DENE</button>
    </div>
</div>

<script>
    // Ses Efektleri (Net ve hızlı yüklenen versiyonlar)
    const sfxCorrect = new Audio('https://www.myinstants.com/media/sounds/ding-sound-effect.mp3');
    const sfxWrong = new Audio('https://www.myinstants.com/media/sounds/wrong-answer-sound-effect.mp3');
    const sfxEnd = new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-sound.mp3');

    const allWords = [
        { tr: "Yurt dışı", en: "abroad" }, { tr: "Görünüş", en: "appearance" }, { tr: "Kişilik", en: "personality" },
        { tr: "Cüzdan", en: "wallet" }, { tr: "Sözlük", en: "dictionary" }, { tr: "Gökdelen", en: "skyscraper" },
        { tr: "Köy", en: "village" }, { tr: "Şehir", en: "city" }, { tr: "Dürüst", en: "honest" },
        { tr: "Kibar", en: "polite" }, { tr: "İnatçı", en: "stubborn" }, { tr: "Yaratıcı", en: "creative" },
        { tr: "Bencil", en: "selfish" }, { tr: "Macera", en: "adventure" }, { tr: "Korku", en: "horror" },
        { tr: "Komşu", en: "neighbour" }, { tr: "Dakik", en: "punctual" }, { tr: "Cömert", en: "generous" }
    ];

    let currentPool = [...allWords];
    let score = 0, timeLeft = 60, gameActive = false, timer, currentWord = {};

    function start() {
        score = 0; timeLeft = 60; gameActive = true;
        currentPool = [...allWords];
        document.getElementById('score').innerText = score;
        document.getElementById('main-btn').innerText = "KONTROL ET";
        document.getElementById('name-modal').style.display = 'none';
        document.getElementById('leader-modal').style.display = 'none';
        next();
        
        clearInterval(timer);
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if(timeLeft <= 0) end();
        }, 1000);
    }

    function next() {
        if (currentPool.length === 0) { end(); return; }
        const wb = document.getElementById('word-box');
        wb.classList.add('wind-enter');
        
        setTimeout(() => {
            const idx = Math.floor(Math.random() * currentPool.length);
            currentWord = currentPool[idx];
            wb.innerText = currentWord.tr;
            wb.classList.remove('wind-enter');
            document.getElementById('ans').value = "";
            document.getElementById('ans').focus();
        }, 150);
    }

    function check() {
        if(!gameActive) { start(); return; }
        const val = document.getElementById('ans').value.toLowerCase().trim();
        const wb = document.getElementById('word-box');

        if(val === currentWord.en) {
            // DOĞRU CEVAP
            score += 10; timeLeft += 5;
            document.getElementById('score').innerText = score;
            
            sfxCorrect.currentTime = 0; // Sesi başa sar (hızlı tekrar için)
            sfxCorrect.play();
            
            confetti({ particleCount: 120, spread: 80, origin: { y: 0.6 } });
            currentPool = currentPool.filter(w => w.en !== currentWord.en);
            
            wb.classList.add('wind-exit');
            setTimeout(() => {
                wb.classList.remove('wind-exit');
                next();
            }, 450);
        } else {
            // YANLIŞ CEVAP
            sfxWrong.currentTime = 0;
            sfxWrong.play();
            
            const overlay = document.getElementById('wrong-overlay');
            overlay.style.display = 'flex';
            setTimeout(() => overlay.style.display = 'none', 500);
            
            document.getElementById('ans').value = "";
            document.getElementById('ans').focus();
        }
    }

    function end() {
        gameActive = false; clearInterval(timer);
        sfxEnd.play();
        document.getElementById('final-score').innerText = "Toplam Puanın: " + score;
        document.getElementById('name-modal').style.display = 'flex';
    }

    function save() {
        const name = document.getElementById('player-name').value.substring(0,12) || "Misafir";
        let scs = JSON.parse(localStorage.getItem('top10_vFINAL')) || [];
        scs.push({n: name, s: score});
        scs.sort((a,b) => b.s - a.s);
        localStorage.setItem('top10_vFINAL', JSON.stringify(scs.slice(0, 10)));
        document.getElementById('name-modal').style.display = 'none';
        showLeaders();
    }

    function showLeaders() {
        const list = document.getElementById('leader-list');
        const scs = JSON.parse(localStorage.getItem('top10_vFINAL')) || [];
        let html = "";
        for(let i=0; i<10; i++) {
            if(scs[i]) {
                html += `<div class="score-row ${i<3 ? 'gold' : ''}"><span>${i+1}. ${scs[i].n}</span><span>${scs[i].s} Puan</span></div>`;
            } else {
                html += `<div class="score-row" style="opacity:0.2;"><span>${i+1}. . . . .</span><span>-</span></div>`;
            }
        }
        list.innerHTML = html;
        document.getElementById('leader-modal').style.display = 'flex';
    }

    function restart() { start(); }
    document.getElementById('ans').addEventListener('keypress', e => e.key === 'Enter' && check());
    document.getElementById('player-name').addEventListener('keypress', e => e.key === 'Enter' && save());
</script>
</body>
</html>
