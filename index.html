<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9. Sınıf İngilizce Kelime Master</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?auto=format&fit=crop&w=1000&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            overflow: hidden;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            width: 90%;
            max-width: 400px;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stats { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .stat-box { background: rgba(0,0,0,0.4); padding: 10px 15px; border-radius: 15px; font-weight: bold; font-size: 18px; color: #00d2d3; }

        #word-box { font-size: 38px; font-weight: 800; margin: 30px 0; text-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        
        input {
            width: 100%;
            padding: 16px;
            border-radius: 15px;
            border: none;
            font-size: 18px;
            text-align: center;
            outline: none;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.9);
            color: #333;
        }

        .btn {
            background: #6c5ce7;
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        /* Şık Giriş ve Liderlik Paneli (Overlay) */
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            z-index: 100;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .modal {
            background: #1e272e;
            width: 85%;
            max-width: 350px;
            border-radius: 25px;
            padding: 25px;
            border: 2px solid #6c5ce7;
            transform: scale(0.8);
            animation: popIn 0.3s forwards;
        }

        @keyframes popIn { to { transform: scale(1); } }

        .score-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 5px;
            border-bottom: 1px solid #3d4852;
        }

        .gold { color: #feca57; font-weight: bold; }
    </style>
</head>
<body>

<div class="game-card" id="game-ui">
    <div class="stats">
        <div class="stat-box"><i class="fa-solid fa-clock"></i> <span id="timer">60</span>s</div>
        <div class="stat-box"><i class="fa-solid fa-fire"></i> <span id="score">0</span></div>
    </div>
    <div id="word-box">BAŞLA!</div>
    <input type="text" id="ans" placeholder="İngilizcesini yaz..." autocomplete="off">
    <button class="btn" onclick="check()">CEVAPLA</button>
</div>

<div id="name-modal" class="overlay">
    <div class="modal">
        <h2 style="margin-top:0; color:#00d2d3;">OYUN BİTTİ!</h2>
        <p id="final-score-text" style="font-size:20px;"></p>
        <input type="text" id="player-name" placeholder="Adınızı girin..." style="background: white;">
        <button class="btn" onclick="saveAndShow()">KAYDET</button>
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="modal">
        <h2 style="margin-top:0; color:#feca57;"><i class="fa-solid fa-crown"></i> EN İYİ 10</h2>
        <div id="leader-list"></div>
        <button class="btn" style="margin-top:20px; background:#ff4757;" onclick="restart()">YENİDEN DENE</button>
    </div>
</div>

<script>
    const wordList = [
        { tr: "Yurt dışı", en: "abroad" }, { tr: "Görünüş", en: "appearance" }, { tr: "Kişilik", en: "personality" },
        { tr: "Komşu", en: "neighbour" }, { tr: "Cüzdan", en: "wallet" }, { tr: "Sözlük", en: "dictionary" },
        { tr: "Şehir", en: "city" }, { tr: "Gökdelen", en: "skyscraper" }, { tr: "Dürüst", en: "honest" },
        { tr: "Cömert", en: "generous" }, { tr: "İnatçı", en: "stubborn" }, { tr: "Kibar", en: "polite" },
        { tr: "Bencil", en: "selfish" }, { tr: "Yaratıcı", en: "creative" }, { tr: "Zarf", en: "envelope" },
        { tr: "Dakik", en: "punctual" }, { tr: "Macera", en: "adventure" }, { tr: "Korku", en: "horror" }
    ];

    let score = 0, timeLeft = 60, gameActive = false, timer, currentWord = {};

    function start() {
        score = 0; timeLeft = 60; gameActive = true;
        document.getElementById('score').innerText = score;
        document.getElementById('timer').innerText = timeLeft;
        document.getElementById('name-modal').style.display = 'none';
        document.getElementById('leader-modal').style.display = 'none';
        next();
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if(timeLeft <= 0) end();
        }, 1000);
    }

    function next() {
        currentWord = wordList[Math.floor(Math.random() * wordList.length)];
        document.getElementById('word-box').innerText = currentWord.tr;
        document.getElementById('ans').value = "";
        document.getElementById('ans').focus();
    }

    function check() {
        if(!gameActive) { start(); return; }
        const val = document.getElementById('ans').value.toLowerCase().trim();
        if(val === currentWord.en) {
            score += 10; timeLeft += 5;
            document.getElementById('score').innerText = score;
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
            next();
        } else { next(); }
    }

    function end() {
        gameActive = false;
        clearInterval(timer);
        document.getElementById('final-score-text').innerText = "Toplam Puan: " + score;
        document.getElementById('name-modal').style.display = 'flex';
        document.getElementById('player-name').focus();
    }

    function saveAndShow() {
        const name = document.getElementById('player-name').value || "İsimsiz";
        let scs = JSON.parse(localStorage.getItem('top10')) || [];
        scs.push({n: name.substring(0,12), s: score});
        scs.sort((a,b) => b.s - a.s);
        localStorage.setItem('top10', JSON.stringify(scs.slice(0, 10)));
        
        document.getElementById('name-modal').style.display = 'none';
        showLeaders();
    }

    function showLeaders() {
        const list = document.getElementById('leader-list');
        const scs = JSON.parse(localStorage.getItem('top10')) || [];
        list.innerHTML = scs.map((x, i) => `
            <div class="score-row ${i < 3 ? 'gold' : ''}">
                <span>${i+1}. ${x.n}</span>
                <span>${x.s}</span>
            </div>
        `).join('');
        document.getElementById('leader-modal').style.display = 'flex';
    }

    function restart() { start(); }
    document.getElementById('ans').addEventListener('keypress', e => e.key === 'Enter' && check());
    document.getElementById('player-name').addEventListener('keypress', e => e.key === 'Enter' && saveAndShow());
</script>
</body>
</html>
