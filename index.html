<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9. Sƒ±nƒ±f ƒ∞ngilizce Kelime Master - SINIF MODU</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7;
            --gold: #feca57;
            --success: #2ecc71;
            --danger: #e74c3c;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh;
            /* Akƒ±llƒ± tahta i√ßin okul/sƒ±nƒ±f temalƒ± arka plan */
            background: linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)), 
                        url('https://images.unsplash.com/photo-1497633762265-9d179a990aa6?auto=format&fit=crop&w=1200&q=80');
            background-size: cover; background-position: center; color: white; overflow: hidden;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(15px);
            width: 95%; max-width: 450px;
            border-radius: 30px; padding: 30px;
            text-align: center; border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .stats { display: flex; width: 100%; justify-content: space-between; margin-bottom: 20px; }
        .stat-box { background: rgba(0,0,0,0.6); padding: 12px 20px; border-radius: 15px; font-weight: 800; color: #00d2d3; border: 2px solid #00d2d3; font-size: 18px; }

        /* Tabela B√∂l√ºm√º */
        .sign-container { position: relative; width: 100%; margin-bottom: 50px; }
        .chains { position: absolute; top: -30px; left: 0; right: 0; display: flex; justify-content: space-around; padding: 0 80px; }
        .chain { width: 7px; height: 50px; background: #666; border-radius: 4px; border: 1px solid #222; }

        .wood-sign {
            background: #5d4037;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            border: 7px solid #3e2723;
            border-radius: 20px;
            padding: 25px 10px;
            box-shadow: 0 10px 0 #2d1b18;
            width: 85%; margin: 0 auto;
        }

        #word-box { font-family: 'Kalam', cursive; font-size: 40px; color: #ffecb3; text-shadow: 3px 3px #3e2723; }

        /* Input ve Modern Buton */
        input {
            width: 100%; padding: 18px; border-radius: 18px; border: 3px solid transparent;
            font-size: 22px; text-align: center; margin-bottom: 20px; outline: none;
            background: #fff; color: #333; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 20px rgba(108,92,231,0.5); }

        .btn {
            background: var(--primary); color: white; border: none; width: 100%;
            padding: 18px; border-radius: 18px; font-size: 18px; font-weight: 800; cursor: pointer;
            box-shadow: 0 6px 0 #4834d4; transition: 0.2s;
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #4834d4; }

        /* Onay Ekranƒ± (ƒ∞pucu ƒ∞√ßin) */
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.92); z-index: 100; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .modal { background: #2d3436; width: 85%; max-width: 350px; border-radius: 30px; padding: 30px; border: 4px solid var(--primary); text-align: center; }
        
        .confirm-btns { display: flex; justify-content: center; gap: 30px; margin-top: 25px; }
        .circle-btn { width: 70px; height: 70px; border-radius: 50%; border: none; cursor: pointer; font-size: 30px; color: white; transition: 0.2s; }
        .btn-yes { background: var(--success); box-shadow: 0 5px 0 #219150; }
        .btn-no { background: var(--danger); box-shadow: 0 5px 0 #a93226; }

        /* Efektler */
        .wind-exit { transform: translateX(200%) rotate(20deg); opacity: 0; }
        .wind-enter { transform: translateX(-200%) rotate(-20deg); opacity: 0; }
    </style>
</head>
<body>

<div id="hint-modal" class="overlay">
    <div class="modal">
        <i class="fa-solid fa-lightbulb" style="font-size: 50px; color: var(--gold);"></i>
        <h2 style="margin: 15px 0;">Dƒ∞KKAT!</h2>
        <p style="font-size: 18px;">ƒ∞pucu almak i√ßin <b style="color:var(--danger)">10 saniye</b> feda edilecek. Onaylƒ±yor musun?</p>
        <div class="confirm-btns">
            <button class="circle-btn btn-no" onclick="closeHint(false)"><i class="fa-solid fa-xmark"></i></button>
            <button class="circle-btn btn-yes" onclick="closeHint(true)"><i class="fa-solid fa-check"></i></button>
        </div>
    </div>
</div>

<div id="name-modal" class="overlay">
    <div class="modal">
        <h2 style="color:#00d2d3;">S√úRE Bƒ∞TTƒ∞!</h2>
        <p id="final-score" style="font-size:26px; font-weight:bold;"></p>
        <input type="text" id="player-name" placeholder="Adƒ±nƒ± yaz...">
        <button class="btn" onclick="save()">PUANI KAYDET</button>
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="modal">
        <h2 style="color:var(--gold);">üèÜ SINIF Lƒ∞DERLERƒ∞</h2>
        <div id="leader-list" style="margin: 20px 0; text-align: left;"></div>
        <button class="btn" style="background:#ff4757; box-shadow: 0 6px 0 #c0392b;" onclick="restart()">YENƒ∞DEN BA≈ûLA</button>
    </div>
</div>

<div class="game-card">
    <div class="stats">
        <div class="stat-box"><i class="fa-solid fa-clock"></i> <span id="timer">60</span>s</div>
        <div class="stat-box"><i class="fa-solid fa-star"></i> <span id="score">0</span></div>
    </div>
    
    <div class="sign-container">
        <div class="chains"><div class="chain"></div><div class="chain"></div></div>
        <div class="wood-sign">
            <div id="word-box">HAZIR MISIN?</div>
        </div>
    </div>

    <input type="text" id="ans" placeholder="Cevabƒ± buraya yaz..." autocomplete="off">
    <button id="main-btn" class="btn" onclick="check()">OYUNU BA≈ûLAT</button>
    <button id="hint-trigger" class="btn" onclick="openHint()" style="display:none; margin-top:15px; background:#fdcb6e; box-shadow: 0 5px 0 #e17055;"><i class="fa-solid fa-lightbulb"></i> ƒ∞pucu Al</button>
</div>

<script>
    const wordList = [
        { tr: "Yurt dƒ±≈üƒ±", en: "abroad" }, { tr: "G√∂r√ºn√º≈ü", en: "appearance" }, { tr: "Ki≈üilik", en: "personality" },
        { tr: "C√ºzdan", en: "wallet" }, { tr: "S√∂zl√ºk", en: "dictionary" }, { tr: "G√∂kdelen", en: "skyscraper" },
        { tr: "K√∂y", en: "village" }, { tr: "≈ûehir", en: "city" }, { tr: "D√ºr√ºst", en: "honest" },
        { tr: "Kibar", en: "polite" }, { tr: "ƒ∞nat√ßƒ±", en: "stubborn" }, { tr: "Yaratƒ±cƒ±", en: "creative" }
    ];

    let currentPool = [...wordList], score = 0, timeLeft = 60, gameActive = false, timer, currentWord = {}, isPaused = false;

    function start() {
        score = 0; timeLeft = 60; gameActive = true; isPaused = false;
        currentPool = [...wordList];
        document.getElementById('score').innerText = score;
        document.getElementById('main-btn').innerText = "KONTROL ET";
        document.getElementById('hint-trigger').style.display = "block";
        document.getElementById('name-modal').style.display = 'none';
        document.getElementById('leader-modal').style.display = 'none';
        next();
        runTimer();
    }

    function runTimer() {
        clearInterval(timer);
        timer = setInterval(() => {
            if(!isPaused) {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if(timeLeft <= 0) end();
            }
        }, 1000);
    }

    function openHint() {
        if(!gameActive) return;
        isPaused = true;
        document.getElementById('hint-modal').style.display = 'flex';
    }

    function closeHint(confirmed) {
        document.getElementById('hint-modal').style.display = 'none';
        if(confirmed) {
            if(timeLeft > 10) {
                timeLeft -= 10;
                document.getElementById('timer').innerText = timeLeft;
                alert("ƒ∞pucu: Kelime '" + currentWord.en[0].toUpperCase() + "' harfi ile ba≈ülƒ±yor!");
            } else {
                alert("Yeterli zamanƒ±n yok!");
            }
        }
        isPaused = false;
        document.getElementById('ans').focus();
    }

    function next() {
        if (currentPool.length === 0) { end(); return; }
        const wb = document.getElementById('word-box');
        wb.classList.add('wind-enter');
        setTimeout(() => {
            const idx = Math.floor(Math.random() * currentPool.length);
            currentWord = currentPool[idx];
            wb.innerText = currentWord.tr;
            wb.classList.remove('wind-enter');
            document.getElementById('ans').value = "";
            document.getElementById('ans').focus();
        }, 200);
    }

    function check() {
        if(!gameActive) { start(); return; }
        if(isPaused) return;
        const val = document.getElementById('ans').value.toLowerCase().trim();
        if(val === currentWord.en) {
            score += 10; timeLeft += 3;
            document.getElementById('score').innerText = score;
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.7 } });
            currentPool = currentPool.filter(w => w.en !== currentWord.en);
            document.getElementById('word-box').classList.add('wind-exit');
            setTimeout(() => { document.getElementById('word-box').classList.remove('wind-exit'); next(); }, 400);
        } else {
            document.getElementById('ans').value = "";
            // Yanlƒ±≈ü cevap efekti eklenebilir
        }
    }

    function end() {
        gameActive = false; clearInterval(timer);
        document.getElementById('final-score').innerText = "Skor: " + score;
        document.getElementById('name-modal').style.display = 'flex';
    }

    function save() {
        const name = document.getElementById('player-name').value || "√ñƒürenci";
        let scs = JSON.parse(localStorage.getItem('top_final_class')) || [];
        scs.push({n: name, s: score});
        scs.sort((a,b) => b.s - a.s);
        localStorage.setItem('top_final_class', JSON.stringify(scs.slice(0, 10)));
        document.getElementById('name-modal').style.display = 'none';
        showLeaders();
    }

    function showLeaders() {
        const list = document.getElementById('leader-list');
        const scs = JSON.parse(localStorage.getItem('top_final_class')) || [];
        let html = "";
        scs.forEach((sc, i) => {
            let icon = (i === 0) ? "üëë " : (i === 1) ? "ü•à " : (i === 2) ? "ü•â " : (i+1) + ". ";
            html += `<div style="display:flex; justify-content:space-between; padding:8px; border-bottom:1px solid #444; ${i<1 ? 'color:var(--gold); font-weight:bold;' : ''}">
                        <span>${icon} ${sc.n}</span><span>${sc.s}</span>
                     </div>`;
        });
        list.innerHTML = html;
        document.getElementById('leader-modal').style.display = 'flex';
    }

    function restart() { start(); }
    document.getElementById('ans').addEventListener('keypress', e => e.key === 'Enter' && check());
</script>
</body>
</html>
