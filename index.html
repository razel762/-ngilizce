<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9. Sƒ±nƒ±f ƒ∞ngilizce - Duygusal Maraton</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #6c5ce7; --gold: #feca57; --success: #2ecc71; --danger: #ff4757; }
        body { font-family: 'Poppins', sans-serif; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1497633762265-9d179a990aa6?auto=format&fit=crop&w=1200&q=80'); background-size: cover; background-position: center; color: white; overflow: hidden; }
        
        .game-card { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); width: 95%; max-width: 450px; border-radius: 40px; padding: 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 25px 50px rgba(0,0,0,0.6); position: relative; z-index: 10; }
        .stats { display: flex; width: 100%; justify-content: space-between; margin-bottom: 15px; }
        .stat-box { background: rgba(0,0,0,0.7); padding: 12px 20px; border-radius: 15px; font-weight: 800; color: #00d2d3; border: 2px solid #00d2d3; font-size: 20px; }
        
        /* Hƒ±rslandƒ±rma/Dalga Mesaj Kutusu */
        #reaction-box { height: 40px; font-size: 22px; font-weight: 800; margin-bottom: 10px; text-transform: uppercase; text-shadow: 2px 2px #000; }
        .success-msg { color: var(--success); animation: pulse 0.4s; }
        .fail-msg { color: var(--danger); animation: shake 0.4s; }

        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.2);} 100% {transform: scale(1);} }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-10px);} 75% {transform: translateX(10px);} }

        /* Ghost X Animasyonu */
        #ghost-x { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); font-size: 250px; color: var(--danger); pointer-events: none; z-index: 999; opacity: 0; display: none; }
        .ghost-animate { display: block !important; animation: ghostPop 0.5s ease-out forwards; }
        @keyframes ghostPop { 0% { transform: translate(-50%, -50%) scale(0.2); opacity: 0; } 50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; } 100% { transform: translate(-50%, -50%) scale(2); opacity: 0; } }

        .wood-sign { background: #5d4037; border: 8px solid #3e2723; border-radius: 20px; padding: 20px 10px; width: 85%; margin: 0 auto 30px; }
        #word-box { font-family: 'Kalam', cursive; font-size: 42px; color: #ffecb3; text-shadow: 3px 3px #3e2723; }
        input { width: 100%; padding: 20px; border-radius: 20px; border: none; font-size: 24px; text-align: center; margin-bottom: 20px; outline: none; }
        .btn { background: var(--primary); color: white; border: none; width: 100%; padding: 18px; border-radius: 20px; font-size: 18px; font-weight: 800; cursor: pointer; box-shadow: 0 6px 0 #4834d4; transition: 0.2s; }
        
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .modal { background: #1e272e; width: 90%; max-width: 400px; border-radius: 35px; padding: 25px; border: 4px solid var(--primary); text-align: center; }
        #leader-list { overflow-y: auto; max-height: 200px; margin: 15px 0; }
        .score-row { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body>

<div id="ghost-x"><i class="fa-solid fa-xmark"></i></div>

<div id="name-modal" class="overlay">
    <div class="modal">
        <h2 style="color:#00d2d3;">OYUN Bƒ∞TTƒ∞</h2>
        <div id="final-score" style="font-size: 45px; font-weight: 800;"></div>
        <div id="rank-msg" style="margin: 15px 0; color: var(--gold); font-weight: bold;"></div>
        <input type="text" id="player-name" placeholder="Adƒ±nƒ± yaz..." maxlength="12">
        <button class="btn" onclick="save()">Lƒ∞STEYE Gƒ∞R</button>
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="modal">
        <h2 style="color:var(--gold);">üèÜ EN ƒ∞Yƒ∞LER</h2>
        <div id="leader-list"></div>
        <button class="view-all-btn" style="background:none; border:1px solid #fff; color:#fff; padding:5px 10px; cursor:pointer;" onclick="showLeaders(100)">T√úM√úN√ú G√ñR</button>
        <button class="btn" style="background:#ff4757; margin-top:15px;" onclick="restart()">YENƒ∞DEN DENE</button>
    </div>
</div>

<div class="game-card">
    <div id="reaction-box"></div> <div class="stats">
        <div class="stat-box"><i class="fa-solid fa-clock"></i> <span id="timer">30</span>s</div>
        <div class="stat-box"><i class="fa-solid fa-bolt"></i> <span id="score">0</span></div>
    </div>
    <div class="wood-sign"><div id="word-box">READY?</div></div>
    <input type="text" id="ans" placeholder="Klavye≈ü√∂rl√ºƒü√ºn√º konu≈ütur!" autocomplete="off">
    <button id="main-btn" class="btn" onclick="check()">MACERAYI BA≈ûLAT üöÄ</button>
</div>

<script>
    const wordList = [
        {tr:"Yurt dƒ±≈üƒ±", en:"abroad"}, {tr:"G√∂r√ºn√º≈ü", en:"appearance"}, {tr:"Ki≈üilik", en:"personality"},
        {tr:"C√ºzdan", en:"wallet"}, {tr:"S√∂zl√ºk", en:"dictionary"}, {tr:"G√∂kdelen", en:"skyscraper"},
        {tr:"K√∂y", en:"village"}, {tr:"≈ûehir", en:"city"}, {tr:"D√ºr√ºst", en:"honest"},
        {tr:"Kibar", en:"polite"}, {tr:"ƒ∞nat√ßƒ±", en:"stubborn"}, {tr:"Yaratƒ±cƒ±", en:"creative"},
        {tr:"Bencil", en:"selfish"}, {tr:"Macera", en:"adventure"}, {tr:"Korku", en:"horror"},
        {tr:"Zeki", en:"intelligent"}, {tr:"Cesur", en:"brave"}, {tr:"Sakin", en:"calm"},
        {tr:"Fakir", en:"poor"}, {tr:"Zengin", en:"rich"}, {tr:"Gen√ß", en:"young"},
        {tr:"Ya≈ülƒ±", en:"old"}, {tr:"Hƒ±zlƒ±", en:"fast"}, {tr:"Yava≈ü", en:"slow"},
        {tr:"G√ºzel", en:"beautiful"}, {tr:"√áirkin", en:"ugly"}, {tr:"B√ºy√ºk", en:"big"},
        {tr:"K√º√ß√ºk", en:"small"}, {tr:"Mutlu", en:"happy"}, {tr:"√úzg√ºn", en:"sad"},
        {tr:"Yorgun", en:"tired"}, {tr:"A√ß", en:"hungry"}, {tr:"Susamƒ±≈ü", en:"thirsty"},
        {tr:"Sƒ±cak", en:"hot"}, {tr:"Soƒüuk", en:"cold"}, {tr:"Yeni", en:"new"},
        {tr:"Eski", en:"old"}, {tr:"Doƒüru", en:"true"}, {tr:"Yanlƒ±≈ü", en:"false"},
        {tr:"Zor", en:"difficult"}, {tr:"Kolay", en:"easy"}, {tr:"Pahalƒ±", en:"expensive"},
        {tr:"Ucuz", en:"cheap"}, {tr:"Tehlikeli", en:"dangerous"}, {tr:"G√ºvenli", en:"safe"},
        {tr:"√ñnemli", en:"important"}, {tr:"Sƒ±kƒ±cƒ±", en:"boring"}, {tr:"Komik", en:"funny"},
        {tr:"C√∂mert", en:"generous"}, {tr:"Cimri", en:"stingy"}, {tr:"Dakik", en:"punctual"},
        {tr:"Konu≈ükan", en:"talkative"}, {tr:"Sessiz", en:"quiet"}, {tr:"√áalƒ±≈ükan", en:"hardworking"},
        {tr:"Tembel", en:"lazy"}, {tr:"Sabƒ±rlƒ±", en:"patient"}, {tr:"Sabƒ±rsƒ±z", en:"impatient"},
        {tr:"Unutkan", en:"forgetful"}, {tr:"Dikkatli", en:"careful"}, {tr:"Dikkatsiz", en:"careless"},
        {tr:"M√ºtevazƒ±", en:"humble"}, {tr:"Kibirli", en:"arrogant"}, {tr:"Kƒ±skan√ß", en:"jealous"},
        {tr:"Meraklƒ±", en:"curious"}, {tr:"Yetenekli", en:"talented"}, {tr:"G√º√ßl√º", en:"strong"},
        {tr:"Zayƒ±f", en:"weak"}, {tr:"Saƒülƒ±klƒ±", en:"healthy"}, {tr:"Hasta", en:"sick"},
        {tr:"Temiz", en:"clean"}, {tr:"Kirli", en:"dirty"}, {tr:"Geni≈ü", en:"wide"},
        {tr:"Dar", en:"narrow"}, {tr:"Derin", en:"deep"}, {tr:"Sƒ±ƒü", en:"shallow"},
        {tr:"Y√ºksek", en:"high"}, {tr:"Al√ßak", en:"low"}, {tr:"Parlak", en:"bright"},
        {tr:"Karanlƒ±k", en:"dark"}, {tr:"Aƒüƒ±r", en:"heavy"}, {tr:"Hafif", en:"light"},
        {tr:"Yumu≈üak", en:"soft"}, {tr:"Sert", en:"hard"}, {tr:"Islak", en:"wet"},
        {tr:"Kuru", en:"dry"}, {tr:"Lezzetli", en:"delicious"}, {tr:"Berbat", en:"terrible"},
        {tr:"Korkmu≈ü", en:"scared"}, {tr:"≈ûa≈üƒ±rmƒ±≈ü", en:"surprised"}, {tr:"Endi≈üeli", en:"worried"},
        {tr:"Heyecanlƒ±", en:"excited"}, {tr:"Gururlu", en:"proud"}, {tr:"Yalnƒ±z", en:"alone"},
        {tr:"Birlikte", en:"together"}, {tr:"Ba≈üarƒ±lƒ±", en:"successful"}, {tr:"Ba≈üarƒ±sƒ±z", en:"unsuccessful"},
        {tr:"Nazik", en:"kind"}, {tr:"Kaba", en:"rude"}, {tr:"Zarif", en:"elegant"}, {tr:"Harika", en:"wonderful"}
    ];

    const bravoMsgs = ["ADAMSIN!", "U√áUYORSUN!", "HIZLI VE √ñFKELƒ∞!", "DURMA!", "MUHTE≈ûEM!", "RAKƒ∞PSƒ∞Sƒ∞N!", "B√ñYLE DEVAM!", "ALEV ALDIN! üî•"];
    const failMsgs = ["Cƒ∞DDƒ∞ Mƒ∞Sƒ∞N?", "KLAVYEYE Mƒ∞ OTURDUN?", "BU MUYDU?", "≈ûAKA YAPIYORSUN...", "HAYIRRR!", "COPTUN Gƒ∞TTƒ∞N!", "DAHA HIZLI!", "Bƒ∞RAZ ODAKLAN!"];

    let currentPool = [], score = 0, timeLeft = 30, gameActive = false, timer, currentWord = {};

    function start() {
        score = 0; timeLeft = 30; gameActive = true;
        currentPool = [...wordList];
        for (let i = currentPool.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [currentPool[i], currentPool[j]] = [currentPool[j], currentPool[i]];
        }
        document.getElementById('score').innerText = score;
        document.getElementById('main-btn').innerText = "G√ñNDER! üí•";
        document.getElementById('ans').placeholder = "Hƒ±zlƒ± yaz, s√ºreyi kap! üî•";
        document.getElementById('name-modal').style.display = 'none';
        document.getElementById('leader-modal').style.display = 'none';
        next(); runTimer();
    }

    function runTimer() {
        clearInterval(timer);
        timer = setInterval(() => { timeLeft--; document.getElementById('timer').innerText = timeLeft; if(timeLeft <= 0) end(); }, 1000);
    }

    function showReaction(type) {
        const box = document.getElementById('reaction-box');
        const msgs = type === 'success' ? bravoMsgs : failMsgs;
        box.innerText = msgs[Math.floor(Math.random() * msgs.length)];
        box.className = type === 'success' ? 'success-msg' : 'fail-msg';
        setTimeout(() => { box.innerText = ""; }, 800);
    }

    function next() {
        if (currentPool.length === 0) { end(); return; }
        currentWord = currentPool.pop();
        document.getElementById('word-box').innerText = currentWord.tr.toUpperCase();
        document.getElementById('ans').value = ""; document.getElementById('ans').focus();
    }

    function check() {
        if(!gameActive) { start(); return; }
        const val = document.getElementById('ans').value.toLowerCase().trim();
        if(val === currentWord.en) {
            score += 50; timeLeft += 3;
            document.getElementById('score').innerText = score;
            showReaction('success');
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
            next();
        } else {
            const x = document.getElementById('ghost-x');
            x.classList.remove('ghost-animate'); void x.offsetWidth; x.classList.add('ghost-animate');
            showReaction('fail');
            document.getElementById('ans').value = "";
        }
    }

    function end() {
        gameActive = false; clearInterval(timer);
        document.getElementById('final-score').innerText = score;
        let msg = "";
        if (score < 200) msg = "Geli≈ütir kendini!";
        else if (score < 500) msg = "Hadi hadi idare edersin...";
        else if (score < 1000) msg = "Anladƒ±k en iyi sensin!";
        else if (score >= 2000) msg = "Dostum √ß√∂zd√ºn sen bu i≈üi! üî•";
        else msg = "Fena deƒüil, ama daha iyisi olur!";
        document.getElementById('rank-msg').innerText = msg;
        document.getElementById('name-modal').style.display = 'flex';
    }

    function save() {
        const name = document.getElementById('player-name').value || "Anonim";
        let scs = JSON.parse(localStorage.getItem('okul_final_v3')) || [];
        scs.push({n: name, s: score});
        scs.sort((a,b) => b.s - a.s);
        localStorage.setItem('okul_final_v3', JSON.stringify(scs.slice(0, 100)));
        document.getElementById('name-modal').style.display = 'none';
        showLeaders(10);
    }

    function showLeaders(limit) {
        const list = document.getElementById('leader-list');
        const scs = JSON.parse(localStorage.getItem('okul_final_v3')) || [];
        let html = "";
        scs.slice(0, limit).forEach((sc, i) => {
            let icon = (i === 0) ? "üëë " : (i === 1) ? "ü•à " : (i === 2) ? "ü•â " : (i+1) + ". ";
            html += `<div class="score-row"><span>${icon}${sc.n}</span><span>${sc.s}</span></div>`;
        });
        list.innerHTML = html || "<p>Kayƒ±t yok.</p>";
        document.getElementById('leader-modal').style.display = 'flex';
    }

    function restart() { start(); }
    document.getElementById('ans').addEventListener('keypress', e => e.key === 'Enter' && check());
</script>
</body>
</html>
