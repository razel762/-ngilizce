<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Burak & Harun | 9/N Master Edition</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bronze: #cd7f32; --iron: #bdc3c7; --gold: #f1c40f; 
            --diamond: #3498db; --elit: #e74c3c; --neon: #ff0000; 
        }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
        body { font-family: 'Poppins', sans-serif; background: #000; color: #fff; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        /* Jumpscare Efektleri */
        @keyframes shake { 0% { transform: translate(0,0); } 25% { transform: translate(-10px, 5px); } 50% { transform: translate(10px, -5px); } 100% { transform: translate(0,0); } }
        .js-bg { background: #800 !important; animation: shake 0.1s infinite; }
        #ghost { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); z-index: 10000; font-size: 200px; opacity: 0; transition: 0.1s; pointer-events: none; }
        .ghost-on { transform: translate(-50%, -50%) scale(2.5) !important; opacity: 1 !important; }

        /* Tasarƒ±m Bile≈üenleri */
        .neon-card { border: 3px solid var(--neon); box-shadow: 0 0 40px var(--neon); background: rgba(0,0,0,0.95); border-radius: 30px; padding: 40px; width: 95%; max-width: 450px; text-align: center; z-index: 100; }
        .header { background: linear-gradient(135deg, #400, #000, #400); border: 2px solid gold; padding: 15px; border-radius: 20px; margin-bottom: 25px; }
        
        input { width: 100%; padding: 18px; border-radius: 15px; border: none; margin-bottom: 15px; text-align: center; font-size: 20px; font-weight: 800; background: #fff; color: #000; }
        .btn { width: 100%; padding: 18px; border-radius: 15px; border: none; font-size: 18px; font-weight: 800; cursor: pointer; transition: 0.3s; background: var(--neon); color: #fff; }
        .btn:active { transform: scale(0.95); }

        /* R√ºtbe Etiketleri */
        .rank { font-size: 11px; font-weight: 900; padding: 6px 12px; border-radius: 10px; color: #000; min-width: 90px; display: inline-block; }
        .r-bronz { background: var(--bronze); color: #fff; }
        .r-demir { background: var(--iron); }
        .r-altin { background: var(--gold); }
        .r-elmas { background: var(--diamond); color: #fff; }
        .r-elit { background: var(--elit); color: #fff; box-shadow: 0 0 15px red; }

        .dev-tag { background: linear-gradient(45deg, #f00, gold); color: #fff; padding: 2px 8px; border-radius: 5px; font-size: 10px; margin-left: 5px; font-weight: 900; }

        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 1000; flex-direction: column; align-items: center; justify-content: center; }
        .score-list { overflow-y: auto; max-height: 300px; text-align: left; margin: 20px 0; }
        .row { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.1); padding: 12px; margin-bottom: 8px; border-radius: 10px; }
    </style>
</head>
<body>

<div id="ghost">üëª</div>
<audio id="s-jump" src="https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=FNAF+Jumpscare&filename=mz/MzU3MDU1NTM1MzcwNTY3_97v8_2b_2f_2fmXw.mp3"></audio>
<audio id="s-win" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>

<div id="scr-auth" class="neon-card">
    <div class="header"><h2 style="font-size: 14px; color: gold;">PROUDLY MADE BY BURAK & HARUN</h2></div>
    <input type="text" id="in-user" placeholder="Kullanƒ±cƒ± Adƒ±">
    <button class="btn" onclick="goPortal()">Sƒ∞STEME Gƒ∞Rƒ∞≈û</button>
</div>

<div id="scr-portal" class="neon-card" style="display:none;">
    <h1 id="txt-hi" style="color:var(--neon); margin-bottom:20px;">Ho≈ügeldin!</h1>
    <button class="btn" onclick="goGame()">OYUNU BA≈ûLAT</button>
    <button class="btn" style="background:#3498db; margin-top:10px;" onclick="showBoard()">SIRALAMA</button>
</div>

<div id="scr-game" class="neon-card" style="display:none;">
    <div style="display:flex; justify-content: space-between; font-weight: 800;">
        <span style="color:red">S√úRE: <b id="txt-time">30</b></span>
        <span style="color:gold">SKOR: <b id="txt-score">0</b></span>
    </div>
    <div id="txt-word" style="font-family:'Kalam'; font-size:50px; margin:30px 0; text-shadow: 0 0 10px red;">...</div>
    <input type="text" id="in-ans" placeholder="ƒ∞ngilizcesini Yaz">
</div>

<div id="scr-board" class="overlay">
    <div class="neon-card">
        <h2 style="color:gold;">üèÜ GLOBAL Lƒ∞STE</h2>
        <div id="list-container" class="score-list"></div>
        <button class="btn" onclick="location.reload()">TEKRAR DENE</button>
    </div>
</div>

<script>
    const WORDS = [
        {tr:"Ba≈üarƒ±",en:"success"},{tr:"Gelecek",en:"future"},{tr:"Teknoloji",en:"technology"},{tr:"Eƒüitim",en:"education"},
        {tr:"Yetenek",en:"ability"},{tr:"Miras",en:"heritage"},{tr:"D√ºr√ºst",en:"honest"},{tr:"√áevre",en:"environment"},
        {tr:"Gelenek",en:"tradition"},{tr:"Macera",en:"adventure"},{tr:"Kibar",en:"polite"},{tr:"Zeki",en:"intelligent"}
    ]; // Toplam 100 kelimeye tamamlanabilir

    let user = "", score = 0, time = 30, clock, current;
    const config = { databaseURL: "https://burak-harun-9n-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    function goPortal() {
        user = document.getElementById('in-user').value.trim();
        if(!user) return;
        document.getElementById('scr-auth').style.display = 'none';
        document.getElementById('scr-portal').style.display = 'block';
        document.getElementById('txt-hi').innerText = "Selam, " + user;
    }

    function goGame() {
        document.getElementById('scr-portal').style.display = 'none';
        document.getElementById('scr-game').style.display = 'block';
        score = 0; time = 30; nextWord();
        clock = setInterval(() => {
            time--;
            document.getElementById('txt-time').innerText = time;
            if(time <= 0) finish();
        }, 1000);
    }

    function nextWord() {
        current = WORDS[Math.floor(Math.random()*WORDS.length)];
        document.getElementById('txt-word').innerText = current.tr.toUpperCase();
        document.getElementById('in-ans').value = ""; document.getElementById('in-ans').focus();
    }

    document.getElementById('in-ans').addEventListener('keypress', (e) => {
        if(e.key === 'Enter') {
            if(document.getElementById('in-ans').value.toLowerCase().trim() === current.en) {
                score += 50; time += 2;
                document.getElementById('txt-score').innerText = score;
                document.getElementById('s-win').play();
                confetti({ particleCount: 40, spread: 60 });
                nextWord();
            } else { boom(); }
        }
    });

    function boom() {
        document.body.classList.add('js-bg');
        document.getElementById('ghost').classList.add('ghost-on');
        document.getElementById('s-jump').play();
        setTimeout(() => {
            document.body.classList.remove('js-bg');
            document.getElementById('ghost').classList.remove('ghost-on');
        }, 600);
        nextWord();
    }

    function finish() {
        clearInterval(clock);
        // Zorla temizle
        document.body.classList.remove('js-bg');
        document.getElementById('ghost').classList.remove('ghost-on');

        let rText = "BRONZ", rClass = "r-bronz";
        if(score >= 2000) { rText = "ELƒ∞T"; rClass = "r-elit"; }
        else if(score >= 1000) { rText = "ELMAS"; rClass = "r-elmas"; }
        else if(score >= 500) { rText = "ALTIN"; rClass = "r-altin"; }
        else if(score >= 200) { rText = "DEMƒ∞R"; rClass = "r-demir"; }

        db.ref('scores_v3/' + user).set({ n: user, s: score, t: rText, c: rClass }).then(() => showBoard());
    }

    function showBoard() {
        document.getElementById('scr-game').style.display = 'none';
        document.getElementById('scr-portal').style.display = 'none';
        document.getElementById('scr-board').style.display = 'flex';
        
        db.ref('scores_v3').orderByChild('s').limitToLast(15).once('value', (s) => {
            let arr = []; s.forEach(x => arr.push(x.val()));
            arr.sort((a,b) => b.s - a.s);
            document.getElementById('list-container').innerHTML = arr.map((p, i) => `
                <div class="row">
                    <span><b>${i+1}.</b> ${p.n} ${p.n.toLowerCase().includes('developer') || p.n === 'Burak' ? '<span class="dev-tag">DEVELOPER</span>' : ''}</span>
                    <div><b>${p.s}</b> <span class="rank ${p.c}">${p.t}</span></div>
                </div>`).join('');
        });
    }
</script>
</body>
</html>
