<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Burak & Harun | 9/N Global Tournament</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bronze: #cd7f32; --iron: #bdc3c7; --gold: #f1c40f; 
            --diamond: #3498db; --elit: #e74c3c; --neon-red: #ff0000; 
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; }
        
        body { 
            font-family: 'Poppins', sans-serif; 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            background: #000; 
            color: white; 
            overflow: hidden; 
            position: relative; 
        }

        /* Dƒ∞NAMƒ∞K ARKA PLAN */
        body::before {
            content: ""; position: absolute; inset: 0;
            background: radial-gradient(circle at center, #300000 0%, #000 100%);
            z-index: -1;
        }

        /* JUMPSCARE VE EFEKTLER */
        @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(-15px, 10px); } 50% { transform: translate(15px, -10px); } }
        .jumpscare-bg { background: #800 !important; animation: shake 0.1s infinite; }
        #ghost { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); z-index: 9999; font-size: 250px; opacity: 0; transition: 0.1s; pointer-events: none; }
        .ghost-active { transform: translate(-50%, -50%) scale(2.5) !important; opacity: 1 !important; }

        /* ANA PANEL */
        .neon-box { 
            border: 4px solid var(--neon-red); 
            box-shadow: 0 0 40px var(--neon-red), inset 0 0 20px var(--neon-red); 
            background: rgba(0, 0, 0, 0.97); 
            border-radius: 35px; 
            padding: 45px; 
            width: 95%; 
            max-width: 480px; 
            text-align: center; 
            z-index: 10; 
            position: relative;
        }

        .maker-header { 
            background: linear-gradient(135deg, #000, #b00, #000); 
            border: 2px solid gold; 
            padding: 25px; 
            border-radius: 25px; 
            margin-bottom: 35px; 
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.7); 
            animation: pulse-header 1.5s infinite ease-in-out;
        }

        @keyframes pulse-header {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); filter: brightness(1.3); }
        }

        /* SIRALAMA Sƒ∞STEMƒ∞ */
        .score-row { 
            display: flex; 
            justify-content: space-between; 
            padding: 18px; 
            margin-bottom: 12px; 
            background: rgba(255,255,255,0.06); 
            border-radius: 18px; 
            align-items: center; 
            border-left: 8px solid var(--neon-red);
            transition: 0.3s;
        }

        .dev-badge { 
            background: linear-gradient(45deg, #f00, #f1c40f, #f00); 
            background-size: 200%;
            color: white; padding: 5px 12px; border-radius: 8px; 
            font-size: 12px; font-weight: 900; margin-left: 10px; 
            box-shadow: 0 0 15px gold;
            animation: flow 2s linear infinite;
        }
        @keyframes flow { 0% { background-position: 0%; } 100% { background-position: 200%; } }

        .rank-tag { font-size: 11px; font-weight: 900; padding: 7px 14px; border-radius: 12px; color: #000; min-width: 100px; text-align: center; }
        .r-caylak { background: var(--bronze); color: #fff; }
        .r-demir { background: var(--iron); }
        .r-altin { background: var(--gold); }
        .r-elmas { background: var(--diamond); color: #fff; }
        .r-elit { background: var(--elit); color: #fff; box-shadow: 0 0 25px var(--elit); }

        /* INPUT VE BUTONLAR */
        input { 
            width: 100%; padding: 20px; border-radius: 18px; border: none; 
            margin-bottom: 20px; text-align: center; font-weight: 800; 
            background: #fff; color: #000; font-size: 20px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .btn { 
            background: var(--neon-red); color: white; border: none; 
            width: 100%; padding: 20px; border-radius: 18px; 
            font-size: 20px; font-weight: 800; cursor: pointer; 
            transition: 0.2s; margin-top: 10px;
            box-shadow: 0 5px 0 #900;
        }
        .btn:active { transform: translateY(5px); box-shadow: none; }
        
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.99); z-index: 1000; flex-direction: column; align-items: center; justify-content: center; padding: 25px; }
        #word-box { font-family: 'Kalam', cursive; font-size: 55px; margin: 35px 0; color: #fff; text-shadow: 0 0 20px var(--neon-red); }
    </style>
</head>
<body id="main-body">

<div id="ghost">üëª</div>
<audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="snd-jumpscare" src="https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=FNAF+Jumpscare&filename=mz/MzU3MDU1NTM1MzcwNTY3_97v8_2b_2f_2fmXw.mp3"></audio>

<div id="auth-screen">
    <div class="neon-box">
        <div class="maker-header">
            <h2 style="font-size: 18px; color: gold; letter-spacing: 1px;">BU Sƒ∞TE BURAK VE HARUN TARAFINDAN YAPILMISTUR</h2>
        </div>
        <input type="text" id="username" placeholder="ADINI YAZ">
        <button class="btn" id="login-btn" onclick="handleAuth()">Sƒ∞STEME Gƒ∞Rƒ∞≈û YAP</button>
    </div>
</div>

<div id="portal-screen" style="display:none;">
    <div class="neon-box">
        <h1 id="welcome-text" style="color:var(--neon-red); margin-bottom:30px; font-size: 35px;">Ho≈ügeldin!</h1>
        <button class="btn" style="height:90px; font-size: 24px; background: #fff; color: #000;" onclick="startGame('single')">OYUNU BA≈ûLAT</button>
        <button class="btn" style="background:#2ecc71;" onclick="showVS()">1 VS 1 MODU</button>
        <button class="btn" style="background:#3498db;" onclick="showLeaders()">GLOBAL SIRALAMA</button>
    </div>
</div>

<div id="game-screen" style="display:none;">
    <div class="neon-box">
        <div style="display:flex; justify-content: space-between; font-weight: 900; font-size: 22px;">
            <span style="color:red">S√úRE: <b id="timer">30</b></span>
            <span style="color:gold">SKOR: <b id="score">0</b></span>
        </div>
        <div id="vs-tag" style="color:cyan; margin-top:12px; font-size: 14px; font-weight: bold;"></div>
        <div id="word-box">...</div>
        <input type="text" id="ans" placeholder="ƒ∞ngilizcesini Yaz Ve Enter">
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="neon-box" style="max-height: 85vh; display: flex; flex-direction: column;">
        <h2 style="color:gold; margin-bottom:25px;">üèÜ GLOBAL ≈ûAMPƒ∞YONLAR</h2>
        <div id="leader-list" style="overflow-y: auto; flex-grow: 1; text-align: left;"></div>
        <button class="btn" onclick="closeModals()">ANA MEN√ú</button>
    </div>
</div>

<script>
    // --- TAM 100 KELƒ∞ME Lƒ∞STESƒ∞ ---
    const baseWords = [
        {tr:"Gelenek",en:"tradition"},{tr:"√áevre",en:"environment"},{tr:"Gelecek",en:"future"},{tr:"Teknoloji",en:"technology"},{tr:"Eƒüitim",en:"education"},{tr:"Ba≈üarƒ±",en:"success"},{tr:"Yetenek",en:"ability"},{tr:"Macera",en:"adventure"},{tr:"Miras",en:"heritage"},{tr:"Kirlilik",en:"pollution"},{tr:"D√ºr√ºst",en:"honest"},{tr:"C√∂mert",en:"generous"},{tr:"ƒ∞nat√ßƒ±",en:"stubborn"},{tr:"Kibar",en:"polite"},{tr:"Vah≈üi Ya≈üam",en:"wildlife"},{tr:"ƒ∞leti≈üim",en:"communication"},{tr:"Geli≈üim",en:"improvement"},{tr:"Nesli T√ºkenmek",en:"extinct"},{tr:"Ke≈üfetmek",en:"explore"},{tr:"Halk Oyunlarƒ±",en:"folk dance"},{tr:"Geri D√∂n√º≈ü√ºm",en:"recycle"},{tr:"Saƒülƒ±klƒ±",en:"healthy"},{tr:"Deneyim",en:"experience"},{tr:"√ñnemli",en:"important"},{tr:"Farklƒ±",en:"different"},{tr:"Kƒ±yafet",en:"clothes"},{tr:"Hava Durumu",en:"weather"},{tr:"Mevsim",en:"season"},{tr:"Tatil",en:"holiday"},{tr:"Bilim",en:"science"},{tr:"ƒ∞cat",en:"invention"},{tr:"Zevk",en:"enjoyment"},{tr:"Karakter",en:"character"},{tr:"D√º≈ü√ºnce",en:"thought"},{tr:"Karar",en:"decision"},{tr:"Meslek",en:"job"},{tr:"Harika",en:"wonderful"},{tr:"Korkun√ß",en:"terrible"},{tr:"Ula≈üƒ±m",en:"transport"},{tr:"Becerikli",en:"skilful"},{tr:"Kaba",en:"rude"},{tr:"Zeki",en:"intelligent"},{tr:"Ciddi",en:"serious"},{tr:"Eƒülenceli",en:"funny"},{tr:"Utanga√ß",en:"shy"},{tr:"Sabƒ±rlƒ±",en:"patient"},{tr:"Dikkatsiz",en:"careless"},{tr:"G√ºvenli",en:"safe"},{tr:"Tehlikeli",en:"dangerous"},{tr:"Hƒ±zlƒ±",en:"fast"},{tr:"Yava≈ü",en:"slow"},{tr:"G√º√ßl√º",en:"strong"},{tr:"Zayƒ±f",en:"weak"},{tr:"Mutlu",en:"happy"},{tr:"√úzg√ºn",en:"sad"},{tr:"Sinirli",en:"angry"},{tr:"Yorgun",en:"tired"},{tr:"A√ß",en:"hungry"},{tr:"Susuz",en:"thirsty"},{tr:"B√ºy√ºk",en:"large"},{tr:"K√º√ß√ºk",en:"small"},{tr:"Pahalƒ±",en:"expensive"},{tr:"Ucuz",en:"cheap"},{tr:"Zengin",en:"rich"},{tr:"Fakir",en:"poor"},{tr:"Temiz",en:"clean"},{tr:"Kirli",en:"dirty"},{tr:"Sƒ±cak",en:"hot"},{tr:"Soƒüuk",en:"cold"},{tr:"Kolay",en:"easy"},{tr:"Zor",en:"difficult"},{tr:"Gen√ß",en:"young"},{tr:"Ya≈ülƒ±",en:"old"},{tr:"Yeni",en:"new"},{tr:"Doƒüru",en:"true"},{tr:"Yanlƒ±≈ü",en:"false"},{tr:"G√ºzel",en:"beautiful"},{tr:"√áirkin",en:"ugly"},{tr:"Y√ºksek",en:"high"},{tr:"Al√ßak",en:"low"},{tr:"Parlak",en:"bright"},{tr:"Karanlƒ±k",en:"dark"},{tr:"M√ºkemmel",en:"perfect"},{tr:"ƒ∞mkansƒ±z",en:"impossible"},{tr:"√únl√º",en:"famous"},{tr:"Yabancƒ±",en:"foreign"},{tr:"Modern",en:"modern"},{tr:"Antik",en:"ancient"},{tr:"√ñzel",en:"special"},{tr:"Faydalƒ±",en:"useful"},{tr:"Zararlƒ±",en:"harmful"},{tr:"G√ºne≈ü",en:"sun"},{tr:"Yaƒümur",en:"rain"},{tr:"Meyve",en:"fruit"},{tr:"Sebze",en:"vegetable"},{tr:"Kitap",en:"book"},{tr:"Okul",en:"school"},{tr:"D√ºnya",en:"world"}
    ];

    const DEVS = ["9/N Sƒ±nƒ±fƒ±ndaki Burak ve Harun", "Burak", "Harun", "Burak 9/N", "Harun 9/N", "Burak developer", "Harun developer"];
    let currentUser = "", score = 0, timeLeft = 30, timer, currentWord;

    // FIREBASE MASTER CONFIG
    const firebaseConfig = { databaseURL: "https://burak-harun-9n-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // HIZLI Gƒ∞Rƒ∞≈û MANTIƒûI (Takƒ±lmayƒ± √ñnler)
    function handleAuth() {
        const u = document.getElementById('username').value.trim();
        if(!u) return;

        // Anƒ±nda i√ßeri al
        currentUser = u;
        document.getElementById('auth-screen').style.display='none';
        document.getElementById('portal-screen').style.display='block';
        document.getElementById('welcome-text').innerText = "Ho≈ügeldin, " + u;

        // Arka planda veritabanƒ± kaydƒ± ve cihaz kilidi
        let myID = localStorage.getItem('master_id') || Math.random().toString(36).substring(7);
        localStorage.setItem('master_id', myID);

        database.ref('tournament_players/' + u).once('value', (s) => {
            if(s.exists() && s.val().id !== myID) {
                alert("Uyarƒ±: Bu isim ba≈üka cihazda! Puan kaydƒ± yapƒ±lmayabilir.");
            } else {
                database.ref('tournament_players/' + u).set({id: myID});
            }
        });
    }

    function startGame(mode) {
        if(mode === 'vs') {
            let op = prompt("Rakip ƒ∞smi Gir:");
            if(!op) return;
            document.getElementById('vs-tag').innerText = currentUser + " VS " + op;
        }
        closeModals();
        document.getElementById('portal-screen').style.display='none';
        document.getElementById('game-screen').style.display='block';
        score = 0; timeLeft = 30; document.getElementById('score').innerText = "0";
        newWord();
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if(timeLeft <= 0) endGame();
        }, 1000);
    }

    function newWord() {
        currentWord = baseWords[Math.floor(Math.random()*baseWords.length)];
        document.getElementById('word-box').innerText = currentWord.tr.toUpperCase();
        document.getElementById('ans').value = ""; document.getElementById('ans').focus();
    }

    document.getElementById('ans').addEventListener('keypress', (e) => {
        if(e.key === 'Enter') {
            let v = document.getElementById('ans').value.toLowerCase().trim();
            if(v === currentWord.en) {
                score += 50; timeLeft += 3;
                document.getElementById('score').innerText = score;
                document.getElementById('snd-correct').play();
                confetti({ particleCount: 50, spread: 80, origin: { y: 0.7 } });
                newWord();
            } else {
                triggerJumpscare();
            }
        }
    });

    function triggerJumpscare() {
        document.body.classList.add('jumpscare-bg');
        document.getElementById('ghost').classList.add('ghost-active');
        document.getElementById('snd-jumpscare').play();
        setTimeout(() => {
            document.body.classList.remove('jumpscare-bg');
            document.getElementById('ghost').classList.remove('ghost-active');
        }, 650);
        newWord();
    }

    function endGame() {
        clearInterval(timer);
        let rt = "BRONZ", rc = "r-caylak";
        if(score >= 2000) { rt = "ELƒ∞T"; rc = "r-elit"; }
        else if(score >= 1000) { rt = "ELMAS"; rc = "r-elmas"; }
        else if(score >= 500) { rt = "ALTIN"; rc = "r-altin"; }
        else if(score >= 200) { rt = "DEMƒ∞R"; rc = "r-demir"; }

        // CANLI GLOBAL KAYIT
        database.ref('tournament_scores/' + currentUser).set({ n: currentUser, s: score, t: rt, c: rc });
        
        alert("S√ºre Bitti! Skor: " + score);
        document.getElementById('game-screen').style.display='none';
        showLeaders();
    }

    function showLeaders() {
        database.ref('tournament_scores').orderByChild('s').limitToLast(30).once('value', (snap) => {
            let l = []; snap.forEach(c => l.push(c.val()));
            l.sort((a,b) => b.s - a.s);
            let h = l.map((item, i) => `
                <div class="score-row">
                    <span><b>${i+1}.</b> ${item.n} ${DEVS.includes(item.n) ? '<span class="dev-badge">DEVELOPER</span>' : ''}</span>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <b style="color:gold;">${item.s}</b>
                        <span class="rank-tag ${item.c}">${item.t}</span>
                    </div>
                </div>`).join('');
            document.getElementById('leader-list').innerHTML = h;
            document.getElementById('leader-modal').style.display = 'flex';
        });
    }

    function showVS() { startGame('vs'); }
    function closeModals() { document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none'); document.getElementById('portal-screen').style.display = 'block'; }
</script>
</body>
</html>
