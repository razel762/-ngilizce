<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Burak & Harun | 9/N Global Game</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bronze: #cd7f32; --iron: #bdc3c7; --gold: #f1c40f; 
            --diamond: #3498db; --elit: #e74c3c; --neon-red: #ff0000; 
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; }
        
        body { 
            font-family: 'Poppins', sans-serif; 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            background: #000; 
            color: white; 
            overflow: hidden; 
            position: relative; 
        }

        /* JUMPSCARE ANƒ∞MASYONLARI */
        @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(-10px, 5px); } 50% { transform: translate(10px, -5px); } }
        .jumpscare-bg { background: #600 !important; animation: shake 0.1s infinite; }
        #ghost { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); z-index: 9999; font-size: 200px; opacity: 0; transition: 0.1s; pointer-events: none; }
        .ghost-active { transform: translate(-50%, -50%) scale(2) !important; opacity: 1 !important; }

        /* PANEL TASARIMI */
        .neon-box { 
            border: 3px solid var(--neon-red); 
            box-shadow: 0 0 30px var(--neon-red), inset 0 0 15px var(--neon-red); 
            background: rgba(0, 0, 0, 0.95); 
            border-radius: 30px; 
            padding: 40px; 
            width: 95%; 
            max-width: 450px; 
            text-align: center; 
            z-index: 10; 
            position: relative; 
        }

        .maker-header { 
            background: linear-gradient(135deg, #000, #900, #000); 
            border: 2px solid gold; 
            padding: 20px; 
            border-radius: 20px; 
            margin-bottom: 30px; 
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.6); 
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0%, 100% { transform: scale(1); box-shadow: 0 0 15px var(--neon-red); }
            50% { transform: scale(1.03); box-shadow: 0 0 35px var(--neon-red); }
        }

        /* SIRALAMA TABLOSU TASARIMI */
        .score-row { 
            display: flex; 
            justify-content: space-between; 
            padding: 15px; 
            margin-bottom: 10px; 
            background: rgba(255,255,255,0.08); 
            border-radius: 15px; 
            align-items: center; 
            border-left: 6px solid var(--neon-red);
            color: #fff !important;
        }

        .dev-badge { 
            background: linear-gradient(45deg, #f00, #ffae00); 
            color: white; 
            padding: 4px 10px; 
            border-radius: 6px; 
            font-size: 11px; 
            font-weight: 900; 
            margin-left: 10px; 
            box-shadow: 0 0 15px #f00; 
            animation: dev-flash 1s infinite;
        }

        @keyframes dev-flash { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }

        .rank-tag { 
            font-size: 11px; 
            font-weight: 900; 
            padding: 6px 12px; 
            border-radius: 10px; 
            color: #000; 
            min-width: 90px; 
            text-align: center; 
        }
        .r-caylak { background: var(--bronze); color: #fff; }
        .r-demir { background: var(--iron); }
        .r-altin { background: var(--gold); }
        .r-elmas { background: var(--diamond); color: #fff; }
        .r-elit { background: var(--elit); color: #fff; box-shadow: 0 0 20px var(--elit); }

        /* BUTONLAR VE INPUT */
        input { 
            width: 100%; 
            padding: 18px; 
            border-radius: 15px; 
            border: none; 
            margin-bottom: 15px; 
            text-align: center; 
            font-weight: bold; 
            background: #fff; 
            color: #000; 
            font-size: 18px; 
        }
        .btn { 
            background: var(--neon-red); 
            color: white; 
            border: none; 
            width: 100%; 
            padding: 18px; 
            border-radius: 15px; 
            font-size: 18px; 
            font-weight: 800; 
            cursor: pointer; 
            transition: 0.3s; 
            margin-top: 10px; 
        }
        .btn:hover { filter: brightness(1.2); transform: translateY(-2px); }
        
        .overlay { 
            display: none; 
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.98); 
            z-index: 1000; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            padding: 20px; 
        }

        #word-box {
            font-family: 'Kalam', cursive;
            font-size: 50px;
            margin: 30px 0;
            color: #fff;
            text-shadow: 0 0 15px var(--neon-red);
        }
    </style>
</head>
<body id="main-body">

<div id="ghost">üëª</div>
<audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="snd-jumpscare" src="https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=FNAF+Jumpscare&filename=mz/MzU3MDU1NTM1MzcwNTY3_97v8_2b_2f_2fmXw.mp3"></audio>

<div id="auth-screen">
    <div class="neon-box">
        <div class="maker-header">
            <h2 style="font-size: 16px; color: gold; text-transform: uppercase;">BU Sƒ∞TE BURAK VE HARUN TARAFINDAN YAPILMISTIR</h2>
        </div>
        <input type="text" id="username" placeholder="Kullanƒ±cƒ± Adƒ±nƒ±zƒ± Yazƒ±n">
        <button class="btn" id="login-btn" onclick="handleAuth()">Gƒ∞Rƒ∞≈û YAP</button>
    </div>
</div>

<div id="portal-screen" style="display:none;">
    <div class="neon-box">
        <h1 id="welcome-text" style="color:var(--neon-red); margin-bottom:25px; font-size: 32px;">Selam!</h1>
        <button class="btn" style="height:80px; font-size: 22px;" onclick="startGame('single')">TEKLƒ∞ OYUN BA≈ûLAT</button>
        <button class="btn" style="background:#2ecc71;" onclick="showVSModal()">1 VS 1 MODU (RAKƒ∞PLƒ∞)</button>
        <button class="btn" style="background:#3498db;" onclick="showLeaders()">D√úNYA SIRALAMASI</button>
    </div>
</div>

<div id="vs-modal" class="overlay">
    <div class="neon-box">
        <h2 style="color:gold; margin-bottom:20px;">RAKƒ∞P ƒ∞SMƒ∞ Gƒ∞Rƒ∞N</h2>
        <input type="text" id="vs-opponent" placeholder="Rakip Adƒ±">
        <button class="btn" onclick="startGame('vs')">VS BA≈ûLAT</button>
        <button class="btn" style="background:gray" onclick="closeModals()">ƒ∞PTAL</button>
    </div>
</div>

<div id="game-screen" style="display:none;">
    <div class="neon-box">
        <div style="display:flex; justify-content: space-between; font-weight: 800; font-size: 20px;">
            <span style="color:red">S√úRE: <b id="timer">30</b></span>
            <span style="color:gold">SKOR: <b id="score">0</b></span>
        </div>
        <div id="vs-tag" style="color:cyan; margin-top:10px; font-weight: bold;"></div>
        <div id="word-box">Y√úKLENƒ∞YOR...</div>
        <input type="text" id="ans" placeholder="ƒ∞ngilizcesini Yaz">
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="neon-box" style="max-height: 85vh; display: flex; flex-direction: column;">
        <h2 style="color:gold; margin-bottom:20px;">üèÜ GLOBAL CANLI TABLO</h2>
        <div id="leader-list" style="overflow-y: auto; flex-grow: 1; text-align: left;"></div>
        <button class="btn" onclick="closeModals()">ANA MEN√úYE D√ñN</button>
    </div>
</div>

<script>
    // --- 100 KELƒ∞MELƒ∞K DEV Lƒ∞STE ---
    const baseWords = [
        {tr:"Gelenek",en:"tradition"},{tr:"√áevre",en:"environment"},{tr:"Gelecek",en:"future"},{tr:"Teknoloji",en:"technology"},{tr:"Eƒüitim",en:"education"},{tr:"Ba≈üarƒ±",en:"success"},{tr:"Yetenek",en:"ability"},{tr:"Macera",en:"adventure"},{tr:"Miras",en:"heritage"},{tr:"Kirlilik",en:"pollution"},{tr:"D√ºr√ºst",en:"honest"},{tr:"C√∂mert",en:"generous"},{tr:"ƒ∞nat√ßƒ±",en:"stubborn"},{tr:"Kibar",en:"polite"},{tr:"Vah≈üi Ya≈üam",en:"wildlife"},{tr:"ƒ∞leti≈üim",en:"communication"},{tr:"Geli≈üim",en:"improvement"},{tr:"Nesli T√ºkenmek",en:"extinct"},{tr:"Ke≈üfetmek",en:"explore"},{tr:"Halk Oyunlarƒ±",en:"folk dance"},{tr:"Geri D√∂n√º≈ü√ºm",en:"recycle"},{tr:"Saƒülƒ±klƒ±",en:"healthy"},{tr:"Deneyim",en:"experience"},{tr:"√ñnemli",en:"important"},{tr:"Farklƒ±",en:"different"},{tr:"Kƒ±yafet",en:"clothes"},{tr:"Hava Durumu",en:"weather"},{tr:"Mevsim",en:"season"},{tr:"Tatil",en:"holiday"},{tr:"Bilim",en:"science"},{tr:"ƒ∞cat",en:"invention"},{tr:"Zevk",en:"enjoyment"},{tr:"Karakter",en:"character"},{tr:"D√º≈ü√ºnce",en:"thought"},{tr:"Karar",en:"decision"},{tr:"Meslek",en:"job"},{tr:"Harika",en:"wonderful"},{tr:"Korkun√ß",en:"terrible"},{tr:"Ula≈üƒ±m",en:"transport"},{tr:"Becerikli",en:"skilful"},{tr:"Kaba",en:"rude"},{tr:"Zeki",en:"intelligent"},{tr:"Ciddi",en:"serious"},{tr:"Eƒülenceli",en:"funny"},{tr:"Utanga√ß",en:"shy"},{tr:"Sabƒ±rlƒ±",en:"patient"},{tr:"Dikkatsiz",en:"careless"},{tr:"G√ºvenli",en:"safe"},{tr:"Tehlikeli",en:"dangerous"},{tr:"Hƒ±zlƒ±",en:"fast"},{tr:"Yava≈ü",en:"slow"},{tr:"G√º√ßl√º",en:"strong"},{tr:"Zayƒ±f",en:"weak"},{tr:"Mutlu",en:"happy"},{tr:"√úzg√ºn",en:"sad"},{tr:"Sinirli",en:"angry"},{tr:"Yorgun",en:"tired"},{tr:"A√ß",en:"hungry"},{tr:"Susuz",en:"thirsty"},{tr:"B√ºy√ºk",en:"large"},{tr:"K√º√ß√ºk",en:"small"},{tr:"Geni≈ü",en:"wide"},{tr:"Dar",en:"narrow"},{tr:"Pahalƒ±",en:"expensive"},{tr:"Ucuz",en:"cheap"},{tr:"Zengin",en:"rich"},{tr:"Fakir",en:"poor"},{tr:"Temiz",en:"clean"},{tr:"Kirli",en:"dirty"},{tr:"Sƒ±cak",en:"hot"},{tr:"Soƒüuk",en:"cold"},{tr:"Kolay",en:"easy"},{tr:"Zor",en:"difficult"},{tr:"Gen√ß",en:"young"},{tr:"Ya≈ülƒ±",en:"old"},{tr:"Yeni",en:"new"},{tr:"Doƒüru",en:"true"},{tr:"Yanlƒ±≈ü",en:"false"},{tr:"G√ºzel",en:"beautiful"},{tr:"√áirkin",en:"ugly"},{tr:"G√ºr√ºlt√ºl√º",en:"noisy"},{tr:"Sessiz",en:"quiet"},{tr:"Y√ºksek",en:"high"},{tr:"Al√ßak",en:"low"},{tr:"Parlak",en:"bright"},{tr:"Karanlƒ±k",en:"dark"},{tr:"M√ºkemmel",en:"perfect"},{tr:"ƒ∞mkansƒ±z",en:"impossible"},{tr:"M√ºmk√ºn",en:"possible"},{tr:"√únl√º",en:"famous"},{tr:"Yabancƒ±",en:"foreign"},{tr:"Modern",en:"modern"},{tr:"Antik",en:"ancient"},{tr:"√ñzel",en:"special"},{tr:"Gerekli",en:"necessary"},{tr:"Faydalƒ±",en:"useful"},{tr:"Zararlƒ±",en:"harmful"},{tr:"Sebze",en:"vegetable"},{tr:"Meyve",en:"fruit"},{tr:"G√ºne≈ü",en:"sun"},{tr:"Bulut",en:"cloud"}
    ];

    const DEVS = ["9/N Sƒ±nƒ±fƒ±ndaki Burak ve Harun", "Burak", "Harun", "Burak 9/N", "Harun 9/N"];
    let currentUser = "", score = 0, timeLeft = 30, timer, currentWord, gameMode = "single";

    // FIREBASE BAƒûLANTISI (GLOBAL)
    const firebaseConfig = { databaseURL: "https://burak-harun-9n-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Gƒ∞Rƒ∞≈û FONKSƒ∞YONU
    function handleAuth() {
        const u = document.getElementById('username').value.trim();
        if(!u) return;

        const btn = document.getElementById('login-btn');
        btn.innerText = "KONTROL EDƒ∞Lƒ∞YOR...";
        btn.disabled = true;

        let myToken = localStorage.getItem('user_token') || Math.random().toString(36).substring(7);
        if(!localStorage.getItem('user_token')) localStorage.setItem('user_token', myToken);

        database.ref('global_players/' + u).once('value', (s) => {
            if(s.exists() && s.val().token !== myToken) {
                alert("Bu kullanƒ±cƒ± adƒ± ba≈üka bir cihaza ait! L√ºtfen ba≈üka bir isim se√ßin.");
                btn.innerText = "Gƒ∞Rƒ∞≈û YAP";
                btn.disabled = false;
            } else {
                database.ref('global_players/' + u).set({token: myToken});
                currentUser = u;
                document.getElementById('auth-screen').style.display='none';
                document.getElementById('portal-screen').style.display='block';
                document.getElementById('welcome-text').innerText = "Ho≈ügeldin, " + u + "!";
            }
        });
    }

    // OYUN BA≈ûLATMA
    function startGame(mode) {
        gameMode = mode;
        if(mode === 'vs') {
            let opp = document.getElementById('vs-opponent').value.trim();
            if(!opp) return;
            document.getElementById('vs-tag').innerText = currentUser + " VS " + opp;
        } else {
            document.getElementById('vs-tag').innerText = "";
        }
        
        closeModals();
        document.getElementById('portal-screen').style.display='none';
        document.getElementById('game-screen').style.display='block';
        score = 0; timeLeft = 30; 
        document.getElementById('score').innerText = "0";
        newWord();

        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if(timeLeft <= 0) endGame();
        }, 1000);
    }

    function newWord() {
        currentWord = baseWords[Math.floor(Math.random()*baseWords.length)];
        document.getElementById('word-box').innerText = currentWord.tr.toUpperCase();
        document.getElementById('ans').value = ""; 
        document.getElementById('ans').focus();
    }

    // CEVAP KONTROL√ú
    document.getElementById('ans').addEventListener('keypress', (e) => {
        if(e.key === 'Enter') {
            let val = document.getElementById('ans').value.toLowerCase().trim();
            if(val === currentWord.en) {
                score += 50; 
                timeLeft += 3; // +3 SANƒ∞YE EKLEME
                document.getElementById('score').innerText = score;
                document.getElementById('snd-correct').play();
                confetti({ particleCount: 40, spread: 70, origin: { y: 0.6 } });
                newWord();
            } else {
                triggerJumpscare(); // YANLI≈ûTA KELƒ∞ME DEƒûƒ∞≈ûƒ∞R VE JUMPSCARE OLUR
            }
        }
    });

    function triggerJumpscare() {
        document.body.classList.add('jumpscare-bg');
        document.getElementById('ghost').classList.add('ghost-active');
        document.getElementById('snd-jumpscare').play();
        setTimeout(() => {
            document.body.classList.remove('jumpscare-bg');
            document.getElementById('ghost').classList.remove('ghost-active');
        }, 650);
        newWord();
    }

    function endGame() {
        clearInterval(timer);
        let r_text = "BRONZ", r_class = "r-caylak";
        if(score >= 2000) { r_text = "ELƒ∞T"; r_class = "r-elit"; }
        else if(score >= 1000) { r_text = "ELMAS"; r_class = "r-elmas"; }
        else if(score >= 500) { r_text = "ALTIN"; r_class = "r-altin"; }
        else if(score >= 200) { r_text = "DEMƒ∞R"; r_class = "r-demir"; }

        // CANLI SKOR KAYDI
        database.ref('global_final_scores/' + currentUser).set({
            n: currentUser, s: score, t: r_text, c: r_class
        });

        alert("S√ºre Bitti! Skorunuz: " + score);
        document.getElementById('game-screen').style.display='none';
        showLeaders();
    }

    function showLeaders() {
        database.ref('global_final_scores').orderByChild('s').limitToLast(30).once('value', (snap) => {
            let list = [];
            snap.forEach(c => list.push(c.val()));
            list.sort((a,b) => b.s - a.s);
            
            let html = list.map((item, i) => `
                <div class="score-row">
                    <span>
                        <b>${i+1}.</b> ${item.n} 
                        ${DEVS.includes(item.n) ? '<span class="dev-badge">DEVELOPER</span>' : ''}
                    </span>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <b style="color:gold;">${item.s}</b>
                        <span class="rank-tag ${item.c}">${item.t}</span>
                    </div>
                </div>`).join('');
            
            document.getElementById('leader-list').innerHTML = html || "Hen√ºz skor yok.";
            document.getElementById('leader-modal').style.display = 'flex';
        });
    }

    function showVSModal() { document.getElementById('vs-modal').style.display = 'flex'; }
    function closeModals() { 
        document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none'); 
        document.getElementById('portal-screen').style.display = 'block';
    }
</script>
</body>
</html>
