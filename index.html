<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9. SÄ±nÄ±f Ä°ngilizce Kelime Master</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7;
            --gold: #feca57;
            --silver: #dfe6e9;
            --bronze: #cd7f32;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?auto=format&fit=crop&w=1000&q=80');
            background-size: cover; background-position: center; color: white; overflow: hidden;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(25px);
            width: 92%; max-width: 400px;
            border-radius: 40px; padding: 25px;
            text-align: center; border: 1px solid rgba(255,255,255,0.15);
            display: flex; flex-direction: column; align-items: center;
        }

        .stats { display: flex; width: 100%; justify-content: space-between; margin-bottom: 20px; }
        .stat-box { background: rgba(0,0,0,0.7); padding: 10px 15px; border-radius: 15px; font-weight: 800; color: #00d2d3; border: 2px solid #00d2d3; font-size: 16px; }

        /* Tabela TasarÄ±mÄ± - Daha Kompakt */
        .sign-container { position: relative; width: 100%; margin: 15px 0 40px 0; }
        .chains { position: absolute; top: -25px; left: 0; right: 0; display: flex; justify-content: space-around; padding: 0 60px; }
        .chain { width: 6px; height: 40px; background: #444; border-radius: 3px; border: 1px solid #111; }

        .wood-sign {
            background: #5d4037;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            border: 6px solid #3e2723;
            border-radius: 15px;
            padding: 20px 10px;
            box-shadow: 0 8px 0 #2d1b18, 0 15px 25px rgba(0,0,0,0.6);
            width: 85%; margin: 0 auto;
        }

        #word-box {
            font-family: 'Kalam', cursive;
            font-size: 34px; /* Mobilde yer kaplamamasÄ± iÃ§in kÃ¼Ã§Ã¼ltÃ¼ldÃ¼ */
            color: #ffecb3;
            text-shadow: 3px 3px 0px #3e2723;
            transition: all 0.5s ease;
        }

        /* MÃ¼kemmel YazÄ± Yazma AlanÄ± */
        .input-wrapper { width: 100%; margin-bottom: 20px; }
        input {
            width: 100%; padding: 18px; border-radius: 20px; border: 3px solid transparent;
            font-size: 20px; text-align: center; outline: none; background: #fff;
            color: #2d3436; box-sizing: border-box;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 25px rgba(108, 92, 231, 0.4);
            transform: scale(1.02);
        }

        .btn {
            background: var(--primary); color: white; border: none; width: 100%;
            padding: 18px; border-radius: 20px; font-size: 18px; font-weight: 800; cursor: pointer;
            box-shadow: 0 6px 0 #4834d4; transition: 0.2s;
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #4834d4; }

        /* Animasyonlar */
        .wind-exit { transform: translateX(200%) rotate(15deg); opacity: 0; }
        .wind-enter { transform: translateX(-200%) rotate(-15deg); opacity: 0; }

        /* Modals */
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.96); z-index: 100; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .modal { background: #1e272e; width: 85%; max-width: 380px; border-radius: 30px; padding: 25px; border: 3px solid var(--primary); text-align: center; }
        .score-row { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); align-items: center; }
        .rank-1 { color: var(--gold); font-weight: 800; background: rgba(254, 202, 87, 0.1); border-radius: 10px; }
        
        #wrong-overlay { display: none; position: fixed; inset: 0; z-index: 200; justify-content: center; align-items: center; background: rgba(255, 0, 0, 0.15); pointer-events: none; }
        #wrong-overlay i { font-size: 200px; color: #ff7675; }
    </style>
</head>
<body>

<div id="wrong-overlay"><i class="fa-solid fa-circle-xmark"></i></div>

<div class="game-card">
    <div class="stats">
        <div class="stat-box"><i class="fa-solid fa-clock"></i> <span id="timer">60</span>s</div>
        <div class="stat-box"><i class="fa-solid fa-fire"></i> <span id="score">0</span></div>
    </div>
    
    <div class="sign-container">
        <div class="chains"><div class="chain"></div><div class="chain"></div></div>
        <div class="wood-sign">
            <div id="word-box">BAÅžLA</div>
        </div>
    </div>

    <div class="input-wrapper">
        <input type="text" id="ans" placeholder="Ä°ngilizcesini yaz..." autocomplete="off">
    </div>
    <button id="main-btn" class="btn" onclick="check()">OYUNU BAÅžLAT</button>
</div>

<div id="name-modal" class="overlay">
    <div class="modal">
        <h2 style="color:#00d2d3;">SÃœRE DOLDU!</h2>
        <p id="final-score" style="font-size:24px; font-weight:bold;"></p>
        <input type="text" id="player-name" placeholder="AdÄ±nÄ±zÄ± yazÄ±n...">
        <button class="btn" onclick="save()" style="margin-top:10px;">KAYDET</button>
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="modal">
        <h2 style="color:var(--gold);"><i class="fa-solid fa-crown"></i> EN Ä°YÄ° 10</h2>
        <div id="leader-list"></div>
        <button class="btn" style="margin-top:20px; background:#ff4757; box-shadow: 0 6px 0 #c0392b;" onclick="restart()">TEKRAR DENE</button>
    </div>
</div>

<script>
    const sfxCorrect = new Audio('https://www.myinstants.com/media/sounds/ding-sound-effect.mp3');
    const sfxWrong = new Audio('https://www.myinstants.com/media/sounds/wrong-answer-sound-effect.mp3');
    const sfxEnd = new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-sound.mp3');

    const wordList = [
        { tr: "Yurt dÄ±ÅŸÄ±", en: "abroad" }, { tr: "GÃ¶rÃ¼nÃ¼ÅŸ", en: "appearance" }, { tr: "KiÅŸilik", en: "personality" },
        { tr: "CÃ¼zdan", en: "wallet" }, { tr: "SÃ¶zlÃ¼k", en: "dictionary" }, { tr: "GÃ¶kdelen", en: "skyscraper" },
        { tr: "KÃ¶y", en: "village" }, { tr: "Åžehir", en: "city" }, { tr: "DÃ¼rÃ¼st", en: "honest" },
        { tr: "Kibar", en: "polite" }, { tr: "Ä°natÃ§Ä±", en: "stubborn" }, { tr: "YaratÄ±cÄ±", en: "creative" },
        { tr: "Bencil", en: "selfish" }, { tr: "Macera", en: "adventure" }, { tr: "Korku", en: "horror" }
    ];

    let currentPool = [...wordList];
    let score = 0, timeLeft = 60, gameActive = false, timer, currentWord = {};

    function start() {
        score = 0; timeLeft = 60; gameActive = true;
        currentPool = [...wordList];
        document.getElementById('score').innerText = score;
        document.getElementById('main-btn').innerText = "KONTROL ET";
        document.getElementById('name-modal').style.display = 'none';
        document.getElementById('leader-modal').style.display = 'none';
        next();
        clearInterval(timer);
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if(timeLeft <= 0) end();
        }, 1000);
    }

    function next() {
        if (currentPool.length === 0) { end(); return; }
        const wb = document.getElementById('word-box');
        wb.classList.add('wind-enter');
        setTimeout(() => {
            const idx = Math.floor(Math.random() * currentPool.length);
            currentWord = currentPool[idx];
            wb.innerText = currentWord.tr;
            wb.classList.remove('wind-enter');
            document.getElementById('ans').value = "";
            document.getElementById('ans').focus();
        }, 200);
    }

    function check() {
        if(!gameActive) { start(); return; }
        const val = document.getElementById('ans').value.toLowerCase().trim();
        const wb = document.getElementById('word-box');

        if(val === currentWord.en) {
            score += 10; timeLeft += 5;
            document.getElementById('score').innerText = score;
            sfxCorrect.currentTime = 0; sfxCorrect.play();
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            currentPool = currentPool.filter(w => w.en !== currentWord.en);
            wb.classList.add('wind-exit');
            setTimeout(() => { wb.classList.remove('wind-exit'); next(); }, 400);
        } else {
            sfxWrong.currentTime = 0; sfxWrong.play();
            const overlay = document.getElementById('wrong-overlay');
            overlay.style.display = 'flex';
            setTimeout(() => overlay.style.display = 'none', 500);
            document.getElementById('ans').value = "";
        }
    }

    function end() {
        gameActive = false; clearInterval(timer);
        sfxEnd.play();
        document.getElementById('final-score').innerText = "PuanÄ±n: " + score;
        document.getElementById('name-modal').style.display = 'flex';
    }

    function save() {
        const name = document.getElementById('player-name').value || "Bilinmiyor";
        let scs = JSON.parse(localStorage.getItem('top_final_v2')) || [];
        scs.push({n: name, s: score});
        scs.sort((a,b) => b.s - a.s);
        localStorage.setItem('top_final_v2', JSON.stringify(scs.slice(0, 10)));
        document.getElementById('name-modal').style.display = 'none';
        showLeaders();
    }

    function showLeaders() {
        const list = document.getElementById('leader-list');
        const scs = JSON.parse(localStorage.getItem('top_final_v2')) || [];
        let html = "";
        for(let i=0; i<10; i++) {
            let icon = (i+1) + ". ";
            let rankClass = "";
            if(i === 0) { icon = "ðŸ‘‘ "; rankClass = "rank-1"; }
            else if(i === 1) { icon = "ðŸ¥ˆ "; rankClass = "rank-2"; }
            else if(i === 2) { icon = "ðŸ¥‰ "; rankClass = "rank-3"; }

            if(scs[i]) {
                html += `<div class="score-row ${rankClass}"><span>${icon}${scs[i].n}</span><span>${scs[i].s}</span></div>`;
            } else {
                html += `<div class="score-row" style="opacity:0.2;"><span>${i+1}. . . . .</span><span>-</span></div>`;
            }
        }
        list.innerHTML = html;
        document.getElementById('leader-modal').style.display = 'flex';
    }

    function restart() { start(); }
    document.getElementById('ans').addEventListener('keypress', e => e.key === 'Enter' && check());
</script>
</body>
</html>
