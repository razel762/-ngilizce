<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Burak & Harun | 9/N Global</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Kalam:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bronze: #cd7f32; --iron: #bdc3c7; --gold: #f1c40f; 
            --diamond: #3498db; --elit: #e74c3c; --neon-red: #ff0000; 
        }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; }
        body { font-family: 'Poppins', sans-serif; min-height: 100vh; display: flex; justify-content: center; align-items: center; background: #000; color: white; overflow: hidden; }
        
        /* JUMPSCARE FIX */
        @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(-10px, 5px); } 50% { transform: translate(10px, -5px); } }
        .jumpscare-bg { background: #600 !important; animation: shake 0.1s infinite !important; }
        #ghost { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); z-index: 9999; font-size: 200px; opacity: 0; transition: 0.1s; pointer-events: none; }
        .ghost-active { transform: translate(-50%, -50%) scale(2) !important; opacity: 1 !important; }

        .neon-box { border: 3px solid var(--neon-red); box-shadow: 0 0 30px var(--neon-red); background: rgba(0, 0, 0, 0.98); border-radius: 30px; padding: 40px; width: 95%; max-width: 450px; text-align: center; z-index: 10; position: relative; }
        .maker-header { background: linear-gradient(135deg, #000, #800, #000); border: 1px solid gold; padding: 15px; border-radius: 15px; margin-bottom: 25px; }
        
        /* R√úTBE VE TABLO TASARIMI */
        .score-row { display: flex; justify-content: space-between; padding: 12px; margin-bottom: 8px; background: rgba(255,255,255,0.08); border-radius: 12px; align-items: center; border-left: 6px solid var(--neon-red); }
        .dev-badge { background: linear-gradient(45deg, #f00, #fa0); color: #fff; padding: 3px 8px; border-radius: 5px; font-size: 10px; font-weight: 900; margin-left: 5px; box-shadow: 0 0 10px #f00; }

        .rank-tag { font-size: 10px; font-weight: 900; padding: 5px 10px; border-radius: 8px; color: #000; min-width: 85px; text-align: center; }
        .r-caylak { background: var(--bronze); color: #fff; }
        .r-demir { background: var(--iron); }
        .r-altin { background: var(--gold); }
        .r-elmas { background: var(--diamond); color: #fff; }
        .r-elit { background: var(--elit); color: #fff; box-shadow: 0 0 15px red; }

        input { width: 100%; padding: 15px; border-radius: 12px; border: none; margin-bottom: 15px; text-align: center; font-size: 18px; font-weight: bold; background: white; color: black; }
        .btn { background: var(--neon-red); color: white; border: none; width: 100%; padding: 15px; border-radius: 12px; font-size: 18px; font-weight: 800; cursor: pointer; transition: 0.2s; }
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.99); z-index: 1000; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
    </style>
</head>
<body id="main-body">

<div id="ghost">üëª</div>
<audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="snd-jumpscare" src="https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=FNAF+Jumpscare&filename=mz/MzU3MDU1NTM1MzcwNTY3_97v8_2b_2f_2fmXw.mp3"></audio>

<div id="auth-screen">
    <div class="neon-box">
        <div class="maker-header"><h2 style="font-size: 14px; color: gold;">BU Sƒ∞TE BURAK VE HARUN TARAFINDAN YAPILMISTIR</h2></div>
        <input type="text" id="username" placeholder="ƒ∞sminiz">
        <button class="btn" onclick="handleAuth()">Gƒ∞Rƒ∞≈û YAP</button>
    </div>
</div>

<div id="portal-screen" style="display:none;">
    <div class="neon-box">
        <h1 id="welcome-text" style="color:red; margin-bottom:20px;">Ho≈ügeldin!</h1>
        <button class="btn" onclick="startGame()">OYUNU BA≈ûLAT</button>
        <button class="btn" style="background:#3498db; margin-top:10px;" onclick="showLeaders()">GLOBAL SIRALAMA</button>
    </div>
</div>

<div id="game-screen" style="display:none;">
    <div class="neon-box">
        <div style="display:flex; justify-content: space-between;">
            <span style="color:red">S√úRE: <b id="timer">30</b></span>
            <span style="color:gold">SKOR: <b id="score">0</b></span>
        </div>
        <div id="word-box" style="font-family:'Kalam'; font-size:45px; margin:25px 0;">...</div>
        <input type="text" id="ans" placeholder="ƒ∞ngilizcesini Yaz">
    </div>
</div>

<div id="leader-modal" class="overlay">
    <div class="neon-box" style="max-height: 85vh; display: flex; flex-direction: column;">
        <h2 style="color:gold; margin-bottom:20px;">üèÜ ≈ûAMPƒ∞YONLAR</h2>
        <div id="leader-list" style="overflow-y: auto; flex-grow: 1; text-align: left;"></div>
        <button class="btn" onclick="location.reload()">TEKRAR OYNA / √áIKI≈û</button>
    </div>
</div>

<script>
    // --- 100 KELƒ∞ME SETƒ∞ ---
    const baseWords = [
        {tr:"Gelenek",en:"tradition"},{tr:"√áevre",en:"environment"},{tr:"Gelecek",en:"future"},{tr:"Teknoloji",en:"technology"},{tr:"Ba≈üarƒ±",en:"success"},{tr:"Yetenek",en:"ability"},{tr:"Macera",en:"adventure"},{tr:"Miras",en:"heritage"},{tr:"D√ºr√ºst",en:"honest"},{tr:"Kibar",en:"polite"},{tr:"Saƒülƒ±klƒ±",en:"healthy"},{tr:"Zeki",en:"intelligent"},{tr:"G√º√ßl√º",en:"strong"},{tr:"Zengin",en:"rich"},{tr:"Fakir",en:"poor"},{tr:"B√ºy√ºk",en:"large"},{tr:"K√º√ß√ºk",en:"small"},{tr:"Yeni",en:"new"},{tr:"Eski",en:"old"},{tr:"G√ºzel",en:"beautiful"},{tr:"√áirkin",en:"ugly"}
    ];

    const DEVS = ["Burak", "Harun", "Burak developer", "Harun developer"];
    let currentUser = "", score = 0, timeLeft = 30, timer, currentWord;

    // FIREBASE BAƒûLANTISI
    const firebaseConfig = { databaseURL: "https://burak-harun-9n-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    function handleAuth() {
        const u = document.getElementById('username').value.trim();
        if(!u) return;
        currentUser = u;
        document.getElementById('auth-screen').style.display='none';
        document.getElementById('portal-screen').style.display='block';
        document.getElementById('welcome-text').innerText = "Selam, " + u;
    }

    function startGame() {
        document.getElementById('portal-screen').style.display='none';
        document.getElementById('game-screen').style.display='block';
        score = 0; timeLeft = 30; newWord();
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if(timeLeft <= 0) endGame();
        }, 1000);
    }

    function newWord() {
        currentWord = baseWords[Math.floor(Math.random()*baseWords.length)];
        document.getElementById('word-box').innerText = currentWord.tr.toUpperCase();
        document.getElementById('ans').value = ""; document.getElementById('ans').focus();
    }

    document.getElementById('ans').addEventListener('keypress', (e) => {
        if(e.key === 'Enter') {
            if(document.getElementById('ans').value.toLowerCase().trim() === currentWord.en) {
                score += 50; timeLeft += 3;
                document.getElementById('score').innerText = score;
                document.getElementById('snd-correct').play();
                confetti({ particleCount: 30 });
                newWord();
            } else { triggerJumpscare(); }
        }
    });

    function triggerJumpscare() {
        document.body.classList.add('jumpscare-bg');
        document.getElementById('ghost').classList.add('ghost-active');
        document.getElementById('snd-jumpscare').play();
        setTimeout(() => {
            document.body.classList.remove('jumpscare-bg');
            document.getElementById('ghost').classList.remove('ghost-active');
        }, 600);
        newWord();
    }

    function endGame() {
        clearInterval(timer);
        document.body.classList.remove('jumpscare-bg');
        document.getElementById('ghost').classList.remove('ghost-active');
        
        let rt = "BRONZ", rc = "r-caylak";
        if(score >= 2000) { rt = "ELƒ∞T"; rc = "r-elit"; }
        else if(score >= 1000) { rt = "ELMAS"; rc = "r-elmas"; }
        else if(score >= 500) { rt = "ALTIN"; rc = "r-altin"; }
        else if(score >= 200) { rt = "DEMƒ∞R"; rc = "r-demir"; }

        // Skor Kaydƒ±
        database.ref('final_ranking/' + currentUser).set({ n: currentUser, s: score, t: rt, c: rc })
        .then(() => showLeaders());
    }

    function showLeaders() {
        document.getElementById('game-screen').style.display='none';
        document.getElementById('portal-screen').style.display='none';
        document.getElementById('leader-modal').style.display='flex';
        
        database.ref('final_ranking').orderByChild('s').limitToLast(20).once('value', (snap) => {
            let l = []; snap.forEach(c => l.push(c.val()));
            l.sort((a,b) => b.s - a.s);
            document.getElementById('leader-list').innerHTML = l.map((item, i) => `
                <div class="score-row">
                    <span><b>${i+1}.</b> ${item.n} ${DEVS.includes(item.n) ? '<span class="dev-badge">DEVELOPER</span>' : ''}</span>
                    <div><b style="color:gold;">${item.s}</b> <span class="rank-tag ${item.c}">${item.t}</span></div>
                </div>`).join('');
        });
    }
</script>
</body>
</html>
