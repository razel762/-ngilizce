<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>9/N Tournament | Burak & Harun</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Poppins:wght@300;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bronze: #cd7f32; --iron: #bdc3c7; --gold: #f1c40f; 
            --diamond: #3498db; --elit: #e74c3c; --neon: #00ff00; --error: #ff0000;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; }
        
        body { 
            font-family: 'Poppins', sans-serif; 
            background: #050505; 
            color: #fff; 
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden;
        }

        /* EKRAN SARSILMA EFEKTƒ∞ (SHAKE) */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shake-active { animation: shake 0.4s; background-color: #200 !important; }

        /* PREMƒ∞UM TASARIM */
        .main-card {
            background: rgba(15, 15, 15, 0.98);
            border: 2px solid #333;
            border-radius: 40px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,1);
        }

        .main-card::before {
            content: ''; position: absolute; inset: -2px;
            background: linear-gradient(45deg, var(--elit), transparent, var(--diamond));
            border-radius: 40px; z-index: -1; opacity: 0.3;
        }

        h2.title { font-family: 'Orbitron', sans-serif; font-size: 14px; color: gold; letter-spacing: 3px; margin-bottom: 30px; }
        
        input {
            width: 100%; padding: 20px; border-radius: 20px; border: 2px solid #222;
            background: #000; color: #fff; font-size: 20px; font-weight: 600;
            margin-bottom: 20px; transition: 0.3s;
        }
        input:focus { border-color: var(--neon); box-shadow: 0 0 15px rgba(0,255,0,0.2); }

        .btn {
            width: 100%; padding: 20px; border-radius: 20px; border: none;
            font-size: 18px; font-weight: 800; cursor: pointer;
            transition: 0.2s; background: #fff; color: #000;
            text-transform: uppercase; letter-spacing: 1px;
        }
        .btn:active { transform: scale(0.96); }
        .btn-vs { background: var(--diamond); color: #fff; margin-top: 10px; }
        .btn-board { background: transparent; border: 2px solid #333; color: #fff; margin-top: 10px; }

        /* R√úTBE Sƒ∞STEMƒ∞ */
        .rank { font-size: 11px; font-weight: 900; padding: 6px 12px; border-radius: 10px; color: #000; min-width: 90px; text-align: center; display: inline-block; }
        .r-bronz { background: var(--bronze); color: #fff; }
        .r-demir { background: var(--iron); }
        .r-altin { background: var(--gold); }
        .r-elmas { background: var(--diamond); color: #fff; }
        .r-elit { background: var(--elit); color: #fff; box-shadow: 0 0 15px var(--elit); }

        .dev-badge { 
            background: linear-gradient(45deg, #ff0000, #ffaa00); 
            color: #fff; padding: 3px 8px; border-radius: 6px; 
            font-size: 10px; font-weight: 900; margin-left: 8px;
            text-shadow: 0 0 5px #000;
        }

        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 1000; flex-direction: column; align-items: center; justify-content: center; }
        .board-list { width: 100%; max-height: 350px; overflow-y: auto; margin: 20px 0; }
        .entry { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #222; }
    </style>
</head>
<body id="body">

<audio id="s-win" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="s-fail" src="https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"></audio>

<div id="scr-auth" class="main-card">
    <h2 class="title">9/N GLOBAL ‚Ä¢ MASTER EDITION</h2>
    <input type="text" id="in-user" placeholder="KULLANICI ADI">
    <button class="btn" onclick="ui.toPortal()">Sƒ∞STEME Gƒ∞Rƒ∞≈û YAP</button>
</div>

<div id="scr-portal" class="main-card" style="display:none;">
    <h1 id="hi-msg" style="margin-bottom:25px; font-size: 28px;">Selam!</h1>
    <button class="btn" onclick="game.start('solo')">TEKLƒ∞ OYUN</button>
    <button class="btn btn-vs" onclick="game.start('vs')">1 VS 1 KAPI≈ûMA</button>
    <button class="btn btn-board" onclick="ui.showBoard()">GLOBAL SIRALAMA</button>
</div>

<div id="scr-game" class="main-card" style="display:none;">
    <div style="display:flex; justify-content: space-between; font-weight: 900; margin-bottom: 15px;">
        <span style="color:var(--elit)">S√úRE: <b id="timer">30</b></span>
        <span style="color:var(--gold)">SKOR: <b id="score">0</b></span>
    </div>
    <div id="word" style="font-size: 50px; font-weight: 900; margin: 30px 0; color: #fff;">...</div>
    <input type="text" id="in-ans" placeholder="CEVABI YAZIN">
</div>

<div id="scr-board" class="overlay">
    <div class="main-card" style="max-height: 85vh; display: flex; flex-direction: column;">
        <h2 style="color:gold;">üèÜ TOP PLAYERS</h2>
        <div id="board-list" class="board-list"></div>
        <button class="btn" onclick="location.reload()">ANA MEN√úYE D√ñN</button>
    </div>
</div>

<script>
    // --- KELƒ∞ME BANKASI ---
    const WORDS = [
        {tr:"Gelenek",en:"tradition"},{tr:"√áevre",en:"environment"},{tr:"Ba≈üarƒ±",en:"success"},{tr:"Yetenek",en:"ability"},
        {tr:"Teknoloji",en:"technology"},{tr:"Gelecek",en:"future"},{tr:"Eƒüitim",en:"education"},{tr:"Miras",en:"heritage"}
    ]; // Burasƒ± uzatƒ±labilir

    // --- CORE Sƒ∞STEM ---
    const fb = {
        init: function() {
            firebase.initializeApp({ databaseURL: "https://burak-harun-9n-default-rtdb.firebaseio.com" });
            this.db = firebase.database();
        },
        save: (u, s, r, c) => fb.db.ref('pro_ranking/' + u).set({ n: u, s: s, r: r, c: c })
    };

    const ui = {
        toPortal: () => {
            const u = document.getElementById('in-user').value.trim();
            if(!u) return;
            game.user = u;
            document.getElementById('scr-auth').style.display = 'none';
            document.getElementById('scr-portal').style.display = 'block';
            document.getElementById('hi-msg').innerText = "Selam, " + u;
        },
        showBoard: () => {
            document.querySelectorAll('.main-card, #scr-portal, #scr-game').forEach(e => e.style.display = 'none');
            document.getElementById('scr-board').style.display = 'flex';
            fb.db.ref('pro_ranking').orderByChild('s').limitToLast(20).once('value', s => {
                let a = []; s.forEach(x => a.push(x.val()));
                a.sort((x,y) => y.s - x.s);
                document.getElementById('board-list').innerHTML = a.map((p, i) => `
                    <div class="entry">
                        <span><b>${i+1}.</b> ${p.n} ${p.n.toLowerCase().includes('developer') || p.n === 'Burak' ? '<span class="dev-badge">DEVELOPER</span>' : ''}</span>
                        <div><b>${p.s}</b> <span class="rank ${p.c}">${p.r}</span></div>
                    </div>`).join('');
            });
        }
    };

    const game = {
        user: "", score: 0, time: 30, clock: null, current: null,
        start: function(m) {
            if(m === 'vs') { const op = prompt("Rakip?"); if(!op) return; }
            document.getElementById('scr-portal').style.display = 'none';
            document.getElementById('scr-game').style.display = 'block';
            this.score = 0; this.time = 30; this.next();
            this.clock = setInterval(() => {
                this.time--;
                document.getElementById('timer').innerText = this.time;
                if(this.time <= 0) this.end();
            }, 1000);
        },
        next: function() {
            this.current = WORDS[Math.floor(Math.random()*WORDS.length)];
            document.getElementById('word').innerText = this.current.tr.toUpperCase();
            document.getElementById('in-ans').value = ""; document.getElementById('in-ans').focus();
        },
        fail: function() {
            document.getElementById('body').classList.add('shake-active');
            document.getElementById('s-fail').play();
            setTimeout(() => document.getElementById('body').classList.remove('shake-active'), 400);
            this.next();
        },
        end: function() {
            clearInterval(this.clock);
            let rt = "BRONZ", rc = "r-bronz";
            if(this.score >= 2000) { rt = "ELƒ∞T"; rc = "r-elit"; }
            else if(this.score >= 1000) { rt = "ELMAS"; rc = "r-elmas"; }
            else if(this.score >= 500) { rt = "ALTIN"; rc = "r-altin"; }
            else if(this.score >= 200) { rt = "DEMƒ∞R"; rc = "r-demir"; }
            fb.save(this.user, this.score, rt, rc).then(() => ui.showBoard());
        }
    };

    document.getElementById('in-ans').addEventListener('keypress', e => {
        if(e.key === 'Enter') {
            if(document.getElementById('in-ans').value.toLowerCase().trim() === game.current.en) {
                game.score += 50; game.time += 2;
                document.getElementById('score').innerText = game.score;
                document.getElementById('s-win').play();
                confetti({ particleCount: 40 });
                game.next();
            } else { game.fail(); }
        }
    });

    fb.init();
</script>
</body>
</html>
